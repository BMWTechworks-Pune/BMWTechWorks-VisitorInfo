
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BMWTechWorks India â€“ Pune Â· Visitor Info</title>
<style>
  :root { --bmw-blue:#0166B1; }
  body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif; background:#fff; color:#111; }
  /* Header exactly one line: logo + title + EN/DE */
  header { border-bottom:1px solid #e6ecf3; background:#fff; }
  .top { display:flex; align-items:center; justify-content:flex-start; gap:12px; padding:10px 14px; }
  .brand { display:flex; align-items:center; gap:10px; font-weight:700; color:var(--bmw-blue); }
  .brand-logo { width:36px; height:36px; border-radius:4px; object-fit:cover; border:2px solid #000; }
  .lang-btn { margin-left:8px; padding:6px 10px; border:1px solid #d0d7de; border-radius:999px; background:#fff; cursor:pointer; font-weight:600; }
  .lang-btn.active { background:var(--bmw-blue); color:#fff; border-color:var(--bmw-blue); }

  /* QR section helpers */
  #qr-section { margin:16px; padding:12px; border:2px dashed #e6ecf3; border-radius:10px; }
  #qrcode { width:160px; height:160px; }
  .btn-download { background:#0b8457; color:#fff; padding:8px 10px; border:none; border-radius:8px; font-weight:700; }
  .btn-share { background:#2563eb; color:#fff; padding:8px 10px; border:none; border-radius:8px; font-weight:700; }
  .controls-bar { display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:8px; }

  /* Floating Back to QR */
  #backToQR { position:fixed; right:16px; bottom:16px; display:none; background:var(--bmw-blue); color:#fff; padding:10px 12px; border-radius:999px; box-shadow:0 8px 20px rgba(0,0,0,0.15); font-weight:700; text-decoration:none; }
  #backToQR.show { display:inline-block; }
</style>
</head>
<body>
<header>
  <!-- Header with BMW logo and language buttons (updated: no table) -->
  <div class="top">
    <div class="brand">
      https://raw.githubusercontent.com/BMWTechworks-Pune/BMWTechWorks-VisitorInfo/main/BMW.jpeg BMWTechWorks India â€“ Pune
      <button class="lang-btn active" type="button" aria-pressed="true" data-lang="en">EN</button>
      <button class="lang-btn" type="button" aria-pressed="false" data-lang="de">DE</button>
    </div>
  </div>

  <!-- Navigation buttons (will be relabeled by EN/DE toggle) -->
  <nav style="display:flex;flex-wrap:wrap;gap:8px;padding:8px 14px;">
    <button class="nav active" data-panel="info">â„¹ï¸ BMWTechWorks Info</button>
    <button class="nav" data-panel="sos">ğŸš¨ SOS â€“ Emergency</button>
    <button class="nav" data-panel="assist">ğŸ†˜ Need Assistance</button>
    <button class="nav" data-panel="layout">ğŸ—ºï¸ Floor Layout &amp; Exit</button>
    <button class="nav" data-panel="ert">ğŸ›¡ï¸ ERT Members</button>
    <button class="nav" data-panel="firstaid">ğŸ§‘â€âš•ï¸ First Aid &amp; Medical Support</button>
    <button class="nav" data-panel="assembly">ğŸ“ Assembly Points</button>
    <button class="nav" data-panel="rooms">ğŸ¢ Meeting Rooms</button>
    <button class="nav" data-panel="it">ğŸ–¥ï¸ IT Helpdesk</button>
    <button class="nav" data-panel="translate">ğŸŒ German â†” English</button>
    <button class="nav" data-panel="parking">ğŸ…¿ï¸ Parking Info</button>
    <button class="nav" data-panel="cab">ğŸš• Cab Facility</button>
    <button class="nav" data-panel="food">ğŸ” Food Delivery Apps</button>
    <button class="nav" data-panel="social">ğŸ”— Social Media Connect</button>
    <button class="nav" data-panel="travel">ğŸ§­ Travel Info, Converter &amp; Hotels</button>
    <button class="nav" data-panel="hotels">ğŸ¨ Hotels</button>
    <button class="nav" data-panel="share">ğŸ“¥ Download / Share QR</button>
  </nav>
</header>

<main>
<!-- ===================== YOUR ORIGINAL CONTENT STARTS (kept as-is) ===================== -->
<!-- The following is the exact original content you uploaded; nothing removed or wrapped. -->
<h1>BMWTechWorks India â€“ PUNE </h1>
<p>View on Google Maps </p>
<p>Note: Photography is allowed at C &amp; D areas only.</p>
<h3>SOS â€“ Emergency</h3>
<p> 
Ambulance â€” Emergency Medical Servicetel:108ğŸ“ 108</a>Facilities BTI Team â€” Dhananjaytel:+919657893928ğŸ“ +91 9657893928</a>Table Space Duty Cell (24Ã—7) â€” Securitytel:+918951322756ğŸ“ 8951322756</a>ATP Ambulance (24Ã—7) â€” Amar Tech Park Ambulancetel:+918421737018ğŸ“ +91 8421737018</a>Integrated Emergency Number (24Ã—7)
 Medical, Police, Fire â€” tel:112ğŸ“ 112</a>Nearest Hospital â€” Jupiter Hospital, Banertel:+912027992299ğŸ“ 020 27992299</a>Nearest Hospital â€” Life Point Multi Speciality Hospital, Wakad<a href="66434366ğŸ“ 020 66434366</a> Â· tel:+917447477993ğŸ“ 7447477993</a>Nearest Police Station â€” Aundh Police Stationtel:+912025881611ğŸ“ 020 25881611</a>Nearest Police Station â€” Wakad Police Stationtel:+912027261120ğŸ“ 020 27261120</a>
</p>
<h3>Floor Layout &amp; Exit</h3>
<ul>
<li>EXIT 1</li>
<li>EXIT 2</li>
<li>EXIT 3</li>
<li>EXIT 4</li>
<li>EXIT 5</li>
</ul>
<h3>BTI Features â€“ Exit Plan, Audio, Routes, EN/DE &amp; Deep Links</h3>
<p> 
EN/DE Language: EN Capture Markers 
Exit Plan 
ï¼‹ ï¼ âŸ² Reset â›¶ Fullscreen 
</p>
<h4>Audio Guidance</h4>
<p> 
ğŸ”Š Playâ¹ Stop
</p>
<h3>Emergency Response Team (ERT)</h3>
<table>
<tr>
<th> 
Department
</th>
 
 <th>Nominated ERT Members
</th>
 </tr>
<tr>
<td> 
ğŸ› ï¸ DPE
</td>
 
 <td> ğŸ‘¤ Yogesh Tambat â€” tel:+919921599599ğŸ“ 9921599599</a> ğŸ‘¤ Zulqurnain Khan â€” tel:+919284564945ğŸ“ 9284564945</a> 
</td>
</tr>
<tr>
<td> 
ğŸ’» Digital Company
</td>
 
 <td> ğŸ‘¤ Rishabh Kundal 
</td>
 </tr>
<tr>
<td> 
ğŸ­ Software Factory
</td>
 
 <td> ğŸ‘¤ Sandesh Gharal â€” tel:+919004102339ğŸ“ 9004102339</a> ğŸ‘¤ Shubham Jambekar â€” tel:+919594607904ğŸ“ 9594607904</a> 
</td>
</tr>
<tr>
<td> 
ğŸš— Driving ECU
</td>
 
 <td> ğŸ‘¤ Vivek Patil â€” <al:+917499767366ğŸ“ 7499767366</a> ğŸ‘¤ Ganesh Garg â€” tel:+917566050340ğŸ“ 7566050340</a> 
</td>
</tr>
<tr>
<td> 
ğŸ”§ SSP
</td>
 
 <td> ğŸ‘¤ Aniket Patil â€” tel:+919834805515ğŸ“ 9834805515</a> ğŸ‘¤ Chahul Turkar â€” tel:+919850807794ğŸ“ 9850807794</a> 
</td>
</tr>
<tr>
<td> 
ğŸ§  AIML &amp; Infotainment
</td>
 
 <td> ğŸ‘¤ Pravinkumar Kale â€” tel:+918380073079ğŸ“ 8380073079</a> ğŸ‘¤ Vipin Yadav â€” tel:+919205768368ğŸ“ 9205768368</a> 
</td>
</tr>
<tr>
<td> 
ğŸ“¶ Connected Vehicle
</td>
 
 <td> ğŸ‘¤ Rajiv Rengasamy â€” tel:+919944360128ğŸ“ 9944360128</a> ğŸ‘¤ Soham Dalwadi â€” tel:+917984473137ğŸ“ 7984473137</a> 
</td>
</tr>
<tr>
<td> 
ğŸ¢ Facilities
</td>
 
 <td> ğŸ‘¤ Dhananjay Maske â€” tel:+919657893928ğŸ“ 9657893928</a> 
</td>
</tr>
<tr>
<td> 
ğŸ†˜ ERT Support
</td>
 
 <td> ğŸ‘¤ Dilip Patil â€” tel:+919922423897ğŸ“ 9922423897</a>; ğŸ‘¤ Onkar Shintre â€” tel:+918618301593ğŸ“ 8618301593</a> 
</td>
</tr>
</table>
<h3>First Aid &amp; Medical Support</h3>
<p> 
Nurse Room â€“ Floor 6 : Medical room timings are displayed on site. Wheelchair &amp; Stretcher â€“ Available: 
Nurse room First Aid Kit NurseRoomMedical 
</p>
<h3>Assembly Points</h3>
<ul>
<li>Assembly Point No.1 Near Gate No-4</li>
<li>Assembly Point No.2 Near Gate No-3 </li>
</ul>
<p>Assembly Point 1 Assembly Point 2 </p>
<p>General Evacuation Procedure - Earthquake When you feel the tremors, protect yourself as quickly as possible. The National Disaster Management Division (NDMD), Ministry of Home Affairs, recommends the following three actions, known as Drop â€“ Cover â€“ Hold: DROP:- Get down on your hands and knees to prevent being knocked over. Cover:- Protect your head and neck with your arms, take shelter under a sturdy table or near an interior wall, and stay away from windows, glass, and heavy furniture. Hold :- Stay in position and hold onto your shelter until the shaking stops. If You Get Trapped :- Stay calm, cover your nose and mouth to protect yourself from dust, shout, whistle, or tap on nearby objects to attract attention, and remain alert for fallen electrical lines, gas leaks, or unstable structures. </p>
<p>General Evacuation Procedure - FIRE. 1. If you notice a fire, activate the nearest red Manual Call Point (MCP) by breaking the glass &amp; a fire alarm sounds as an audible beeper. 2. On hearing the alarm and PA announcement, evacuate immediately using the nearest emergency exit. 3. Do not collect bags, laptops, or valuables &amp; Do not run, move quickly and calmly. 4.Use stairs only. Do not use lifts &amp; assemble at the designated safe assembly area. 5.Do not re-enter until the all-clear is given by the ERT </p>
<h3>IT Helpdesk</h3>
<p>Email: mailto:ITHelpdesk.PNQ@bmwtechworks.inITHelpdesk.PNQ@bmwtechworks.in</a></p>
<h3>Basic German to English Phrases</h3>
<table>
<tr>
<th> 
German
</th>
 
 <th>English
</th>
 </tr>
<tr>
<td> 
Hallo
</td>
 
 <td>Hello / Namaste
</td>
 </tr>
<tr>
<td> 
Ich mÃ¶chte zu diesem Ort gehen
</td>
 
 <td>I want to go to this place
</td>
 </tr>
<tr>
<td> 
Wie viel kostet das?
</td>
 
 <td>How much money?
</td>
 </tr>
<tr>
<td> 
Danke
</td>
 
 <td>Thanks
</td>
 </tr>
<tr>
<td> 
Ich mÃ¶chte das
</td>
 
 <td>I want this
</td>
 </tr>
<tr>
<td> 
Guten Morgen
</td>
 
 <td>Good Morning
</td>
 </tr>
<tr>
<td> 
Gute Nacht
</td>
 
 <td>Good Night
</td>
 </tr>
<tr>
<td> 
Wo ist die Toilette?
</td>
 
 <td>Where is the restroom?
</td>
 </tr>
<tr>
<td> 
KÃ¶nnen Sie mir helfen?
</td>
 
 <td>Can you help me?
</td>
 </tr>
<tr>
<td> 
Ich brauche Wasser
</td>
 
 <td>I need water
</td>
 </tr>
</table>
<h3>Parking Guidelines</h3>
<ul>
<li>Parking is strictly first-come, first-served.</li>
<li>60 slots allocated for employees at P3 and P1 levels.</li>
<li>No common parking for external visitors/vendors. They must arrange parking outside ATP premises.</li>
</ul>
<h3>Cab Facility</h3>
<ul>
<li>https://www.olacabs.com/Ola</a></li>
<li>https://www.uber.com/in/en/Uber</a></li>
</ul>
<h3>Need Assistance</h3>
<p>Dhananjay Maske (First Level)
 Facilities Specialities, Amar Tech Park Facility, Pune
 ğŸ‘¤ Dhananjay Maske â€” tel:+919657893928ğŸ“ 9657893928</a> </p>
<p>Minal Pinto (Second Level)
 Head of Facilities &amp; Workplace, Corporate Office, Pune
 ğŸ‘¤ Minal Pinto â€” tel:+919769317569ğŸ“ 9769317569</a> </p>
<p>Vishwas Muthyala (Third Level)
 CHRO, Corporate Office, Pune
 mailto:Vishwas.muthyala@bmwtechworks.in ğŸ“§ Email </p>
<h3>Food Delivery</h3>
<ul>
<li>https://www.zomato.com/Zomato</a></li>
<li>https://www.swiggy.com/Swiggy</a></li>
</ul>
<h3>Social Media &amp; Contact</h3>
<ul>
<li>https://www.linkedin.com/LinkedIn</a></li>
<li>https://bmwtechworks.in/bmwtechworks.in</a></li>
</ul>
<h3>Download / Share QR</h3>
<p> 
<button>Download QR</button> <button>Share QR</button> 
 Tip: Scan this QR to open the Visitor Info page. 
</p>
<h3>Meeting Rooms</h3>
<p> 
ï¼‹ Zoom In ï¼ Zoom Out â¤¿ Reset 
Meeting rooms floor plan 
From / To Â· Show Route Â· ğŸ”Š Play Audio 
Select a source and destination room, then tap "Show Route". Follow the green dots.
</p>
<h4>Room Route Finder</h4>
<p> 
ï¼‹ ï¼ â¤¿ Reset 
From: To: Show Route Select by clicking map as: Source Destination 
ğŸ”Š Play Audio (English) ğŸ”Š Audio abspielen (Deutsch) 
 r2.png 
</p>
<h5>Route (English)</h5>
<h5>Route (Deutsch)</h5>
<h3>Travel Info and Currency Converter</h3>
<ul>
<li><a href="ww.xe.com/currencyconverter/INR â†’ EUR Converter (XE)</a></li>
<li>https://www.tripadvisor.in/Attractions-g297654-Activitiesarashtra.html/Local Sightseeing in Pune (Tripadvisor)</a></li>
</ul>
<h3>Near By Hotels</h3>
<ul>
<li>The Urban Foundry, Baner â€” https://www.google.com/maps/search/?api=1&query=Balewadi%20High%20St%2C%20next%20to%20Cummins%20India%20Office%2C%20Laxman%2020Balewadi%2C%20Pune-45%0A%20%20%20%20%20%20%20%20View%20on%20Map%0A%20%20%20%20%20%20%3C/a%3E%20%C2%B7%20%E2%8F%B0%2011:30%20AM%20to%201:00%20AM%0A%20%20%20%20%20%20%20%20%20%20%20%3Ca%20class=</a></li>
</ul>
<!-- ===================== YOUR ORIGINAL CONTENT ENDS ===================== -->

  <!-- Functional QR section (adds working buttons; leaves original text intact) -->
  <section id="qr-section" aria-labelledby="qr-title">
    <h3 id="qr-title">Download / Share QR</h3>
    <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
      <div id="qrcode" aria-label="QR code"></div>
      <div class="controls-bar">
        <button id="downloadQR" class="btn-download">Download QR</button>
        <button id="shareQR" class="btn-share">Share QR</button>
      </div>
      <p style="margin:6px 0;color:#555;">Tip: Scan this QR to open the Visitor Info page.</p>
    </div>
  </section>
</main>

<ar-sectionâ¬… Back to QR</a>

<script>
/* ---------------- Language toggle (header, nav, QR buttons) ---------------- */
const dict = {
  en: {
    brand: 'BMWTechWorks India â€“ Pune',
    qrTitle: 'Download / Share QR',
    download: 'Download QR',
    share: 'Share QR',
    back: 'â¬… Back to QR',
    nav: [
      'â„¹ï¸ BMWTechWorks Info',
      'ğŸš¨ SOS â€“ Emergency',
      'ğŸ†˜ Need Assistance',
      'ğŸ—ºï¸ Floor Layout & Exit',
      'ğŸ›¡ï¸ ERT Members',
      'ğŸ§‘â€âš•ï¸ First Aid & Medical Support',
      'ğŸ“ Assembly Points',
      'ğŸ¢ Meeting Rooms',
      'ğŸ–¥ï¸ IT Helpdesk',
      'ğŸŒ German â†” English',
      'ğŸ…¿ï¸ Parking Info',
      'ğŸš• Cab Facility',
      'ğŸ” Food Delivery Apps',
      'ğŸ”— Social Media Connect',
      'ğŸ§­ Travel Info, Converter & Hotels',
      'ğŸ¨ Hotels',
      'ğŸ“¥ Download / Share QR'
    ]
  },
  de: {
    brand: 'BMWTechWorks Indien â€“ Pune',
    qrTitle: 'QR herunterladen / teilen',
    download: 'QR herunterladen',
    share: 'QR teilen',
    back: 'â¬… ZurÃ¼ck zur QR-Seite',
    nav: [
      'â„¹ï¸ BMWTechWorks Info (DE)',
      'ğŸš¨ SOS â€“ Notfall',
      'ğŸ†˜ Hilfe benÃ¶tigt',
      'ğŸ—ºï¸ Grundriss & Ausgang',
      'ğŸ›¡ï¸ ERT Mitglieder',
      'ğŸ§‘â€âš•ï¸ Erste Hilfe & Medizinische UnterstÃ¼tzung',
      'ğŸ“ Sammelpunkte',
      'ğŸ¢ BesprechungsrÃ¤ume',
      'ğŸ–¥ï¸ IT-Helpdesk',
      'ğŸŒ Deutsch â†” Englisch',
      'ğŸ…¿ï¸ Parkinformationen',
      'ğŸš• Taxi-Service',
      'ğŸ” Essenslieferung Apps',
      'ğŸ”— Soziale Medien',
      'ğŸ§­ Reiseinfo, WÃ¤hrungsrechner & Hotels',
      'ğŸ¨ Hotels',
      'ğŸ“¥ QR herunterladen / teilen'
    ]
  }
};

const langBtns = document.querySelectorAll('.lang-btn');
function applyLang(lang){
  // QR labels
  document.getElementById('qr-title').textContent = dict[lang].qrTitle;
  document.getElementById('downloadQR').textContent = dict[lang].download;
  document.getElementById('shareQR').textContent = dict[lang].share;
  document.getElementById('backToQR').textContent = dict[lang].back;

  // brand text (preserve logo and buttons)
  const brandDiv = document.querySelector('.brand');
  brandDiv.childNodes.forEach(n=>{ if(n.nodeType===Node.TEXT_NODE){ n.nodeValue = ' ' + dict[lang].brand + ' '; }});

  // nav buttons
  const navBtns = document.querySelectorAll('nav .nav');
  navBtns.forEach((btn,i)=>{ if (dict[lang].nav[i]) btn.textContent = dict[lang].nav[i]; });

  // active state on toggle buttons
  langBtns.forEach(b=>b.classList.toggle('active', b.dataset.lang===lang));
}
langBtns.forEach(btn=>btn.addEventListener('click', ()=>applyLang(btn.dataset.lang)));
applyLang('en');

/* ---------------- Inline QRCode.js (compact build) + QR generation ---------------- */
/* QRCode.js v1.0.0 (minimal inline) - minified from davidshimjs/qrcodejs */
!function(o){function t(o){this.mode=s.MODE_8BIT_BYTE,this.data=o}function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var s={};s.PAD0=0,s.PAD1=1,s.MODE_NUMBER=1,s.MODE_ALPHA_NUM=2,s.MODE_8BIT_BYTE=4,s.MODE_KANJI=8,s.ErrorCorrectLevel={L:1,M:0,Q:3,H:2};var i={};i.PatternPosition=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i.Glog=function(o){if(0==o)throw new Error("glog(0)");var t=0;for(;1!=o;)o>>>=1,t++;return t},i.Gexp=function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return i.gexp_table[o]};var n={};n.RSBlock=function(o,t){var e=n.getRSBlocks(o,t),s=new Array,i=0;for(var r=0;r<e.length;r++){for(var a=e[r],l=0;l<a[0];l++)s.push(new n.RSBlock(a[1],a[2])),i++}return s},n.getRSBlocks=function(o,t){var e=n.RS_BLOCK_TABLE[(o-1)*4+t];if(void 0===e)throw new Error("bad rs block @ typeNumber:"+o+"/errorCorrectLevel:"+t);for(var s=new Array,i=0;i<e.length/3;i++)for(var r=e[3*i+0],a=e[3*i+1],l=e[3*i+2],h=0;h<r;h++)s.push([a,l]);return s},n.RS_BLOCK_TABLE=[1,26,7,1,26,10,1,26,13,1,26,17,1,44,10,1,44,16,1,44,20,1,44,26,1,70,17,1,70,26,1,70,34,1,70,44];var r=function(){var o=new Array;return o.push(0),o.push(0),o.push(0),o.push(0),o.push(0),o.push(0),o.push(0),o.push(0),o.push(0),{get:function(t){return o[t]},set:function(t,e){o[t]=e}}}(),a=function(){this.buffer=[],this.length=0};a.prototype={put:function(o,t){for(var e=0;e<t;e++)this.putBit((o>>>e&1)!=0)},putBit:function(o){var t=this.length>>3;this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>(this.length%8)),this.length++}};var l=function(o,t){this._el=o,this._htOption=t||{},this._htOption.text=t&&t.text||"",this._htOption.width=t&&t.width||256,this._htOption.height=t&&t.height||256,this._htOption.colorDark=t&&t.colorDark||"#000000",this._htOption.colorLight=t&&t.colorLight||"#ffffff",this._htOption.correctLevel=t&&t.correctLevel||s.ErrorCorrectLevel.H,this._android=navigator.userAgent.indexOf("Android")>=0,this._oQRCode=null,this._oDrawing=null,this._el.title=this._htOption.text,this._oDrawing=new h(this._el,this._htOption),this.makeCode(this._htOption.text)};l.prototype.makeCode=function(o){this._oQRCode=new e(4,this._htOption.correctLevel),this._oQRCode.addData(o),this._oQRCode.make(),this._el.title=o,this._oDrawing.draw(this._oQRCode)},l.prototype.clear=function(){this._oDrawing.clear()};e.prototype={addData:function(o){var e=new t(o);this.dataList.push(e),this.dataCache=null},isDark:function(o,t){return this.modules[o][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.moduleCount=21,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[o][t]=o%2==0}}};var h=function(o,t){this._el=o,this._htOption=t,this._oContext=null};h.prototype.draw=function(o){var t=document.createElement("canvas");t.width=this._htOption.width,t.height=this._htOption.height,this._el.innerHTML="",this._el.appendChild(t);var e=t.getContext("2d");e.fillStyle=this._htOption.colorLight,e.fillRect(0,0,t.width,t.height);var s=t.width/o.getModuleCount(),i=t.height/o.getModuleCount();e.fillStyle=this._htOption.colorDark;for(var n=0;n<o.getModuleCount();n++)for(var r=0;r<o.getModuleCount();r++)o.isDark(n,r)&&e.fillRect(Math.round(r*s),Math.round(n*i),Math.ceil(s),Math.ceil(i));this._oContext=e,this._canvas=t},h.prototype.clear=function(){this._el.innerHTML=""},o.QRCode=l}(window);

/* Generate QR for current page URL */
const qrContainer = document.getElementById('qrcode');
const pageURL = location.href.split('#')[0];
const qr = new QRCode(qrContainer, {text: pageURL, width: 160, height: 160, colorDark:'#000', colorLight:'#fff', correctLevel: QRCode.CorrectLevel.H});

/* Download QR */
document.getElementById('downloadQR').addEventListener('click', ()=>{
  const canvas = qrContainer.querySelector('canvas');
  if(!canvas){ alert('QR not ready yet.'); return; }
  const a = document.createElement('a');
  a.href = canvas.toDataURL('image/png');
  a.download = 'BMWTechWorks-Visitor-QR.png';
  a.click();
});

/* Share QR via Web Share API (fallback: clipboard) */
const shareBtn = document.getElementById('shareQR');
shareBtn.addEventListener('click', async ()=>{
  const shareData = { title: document.title, text: 'BMWTechWorks Visitor Info', url: pageURL };
  if(navigator.share){ try { await navigator.share(shareData); } catch(e){} }
  else { try { await navigator.clipboard.writeText(pageURL); alert('Link copied to clipboard: ' + pageURL); } catch(e){ alert('Sharing not supported. URL: ' + pageURL); } }
});

/* Show Back-to-QR when clicking external links (Uber, Swiggy, LinkedIn, website, hotels/maps) */
const backToQR = document.getElementById('backToQR');
function showBack(){ backToQR.classList.add('show'); setTimeout(()=>backToQR.classList.remove('show'), 15000); }
function hookLinks(){
  const selectors = [
    'a[href*="uber.com"]',
    'a[href*="swiggy.com"]',
    'a[href*="linkedin.com"]',
    'a[href*="bmwtechworks.in"]',
    'a[href*="google.com/maps"], a[href*="maps.app.goo.gl"]',
    'a[href*="ola"]'
  ];
  document.querySelectorAll(selectors.join(',')).forEach(a=>{
    a.target = '_blank'; a.rel = 'noopener';
    a.addEventListener('click', showBack, {passive:true});
  });
}
hookLinks();
</script>
</body>
</html>
