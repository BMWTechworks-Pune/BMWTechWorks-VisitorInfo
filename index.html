<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BMWTechWorks India ‚Äì PUNE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;margin:0;background:#f7f9fc}
.panel{display:none;padding:16px}
.panel.active{display:block}
.btn{padding:8px 12px;border:1px solid #ccc;border-radius:8px;cursor:pointer}
img{max-width:100%}

/* --- MEETING ROOM ZOOM --- */
#roomWrapper{
overflow:hidden;
border:1px solid #ccc;
height:60vh;
}
#roomImg{
transform-origin:0 0;
cursor:grab;
}
</style>
</head>

<body>

<!-- NAV -->
<button onclick="show('share')">üì• Download / Share QR</button>
<button onclick="show('rooms')">üè¢ Meeting Rooms</button>

<!-- SHARE PANEL -->
<section id="panel-share" class="panel active">
<h2>Download / Share QR</h2>

<!-- ‚úÖ ID ADDED -->
<img id="siteQR" src="q_code.png" style="max-width:200px"><br><br>

<button class="btn" onclick="downloadQR()">Download QR</button>
<button class="btn" onclick="shareQR()">Share QR</button>
</section>

<!-- ROOMS PANEL -->
<section id="panel-rooms" class="panel">
<h2>Meeting Rooms</h2>

<div id="roomWrapper">
<img id="roomImg" src="r2.png">
</div>

<br>
<button class="btn" onclick="zoom(1.2)">‚ûï Zoom In</button>
<button class="btn" onclick="zoom(0.8)">‚ûñ Zoom Out</button>
<button class="btn" onclick="resetZoom()">Reset</button>

<hr>

<label>Select Room:</label>
<select id="roomSel" onchange="showRoute()">
<option value="">-- Select --</option>
<option>Success</option>
<option>Inspire</option>
<option>Joy</option>
<option>Debug</option>
<option>iDrive</option>
<option>M-Mode</option>
<option>Drift</option>
<option>xDrive</option>
<option>Torque</option>
</select>

<ol id="routeText"></ol>
</section>

<script>
/* PANEL SWITCH */
function show(p){
document.querySelectorAll('.panel').forEach(x=>x.classList.remove('active'));
document.getElementById('panel-'+p).classList.add('active');
}

/* ---------- QR FIX ---------- */
const LANDING_URL="https://techworks-pune.github.io/BMWTechWorks-VisitorInfo/";

async function downloadQR(){
const img=document.getElementById("siteQR");
const res=await fetch(img.src);
const blob=await res.blob();
const url=URL.createObjectURL(blob);
const a=document.createElement("a");
a.href=url;
a.download="BMWTechWorks_QR.png";
a.click();
URL.revokeObjectURL(url);
}

async function shareQR(){
if(navigator.share){
navigator.share({
title:"BMWTechWorks Pune",
url:LANDING_URL
});
}else{
navigator.clipboard.writeText(LANDING_URL);
alert("Link copied to clipboard");
}
}

/* ---------- ZOOM ---------- */
let scale=1;
const img=document.getElementById("roomImg");
function zoom(f){scale*=f;img.style.transform=`scale(${scale})`;}
function resetZoom(){scale=1;img.style.transform="scale(1)";}

/* ---------- ROUTES ---------- */
const routes={
Success:["From Reception go left","Board Room is Success"],
Inspire:["From Reception go left","Training Room beside Success"],
Joy:["From Reception go left","Joy near Visitor Room"],
Debug:["From Reception straight","Middle section"],
iDrive:["From Reception straight","Opposite Debug"],
"M-Mode":["From Reception straight","Right corner"],
Drift:["From Reception right wing","Near xDrive"],
xDrive:["From Reception far right","Next to Torque"],
Torque:["From Reception far right","Last room"]
};

function showRoute(){
const r=document.getElementById("roomSel").value;
const ol=document.getElementById("routeText");
ol.innerHTML="";
if(!r)return;
routes[r].forEach(s=>{
const li=document.createElement("li");
li.innerText=s;
ol.appendChild(li);
});
}
</script>

</body>
</html>
