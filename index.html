<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>BMWTechWorks Pune - Visitor Information</title>
<style>
   
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BMWTechWorks Pune ‚Äì Visitor Information & Meeting Rooms (Final)</title>
  
 <style>
    :root{ --accent:#007aff; --danger:#ff3b30; --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; }
    html,body{ height:100%; }
    body{ font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:var(--bg); color:var(--text); }

    /* Compact bold heading */
    header{ padding:12px 16px; background:#ffffff; border-bottom:1px solid #e6e6e6; }
    header h2{ margin:0; font-size:16px; font-weight:700; line-height:1.3; }

    /* Container */
    .container{ padding:0 12px 24px; }
    .grid{ display:grid; grid-template-columns: 2fr 1fr; gap:14px; }
    @media (max-width:1000px){ .grid{ grid-template-columns: 1fr; } }
    .card{ background:var(--card); border:1px solid #e6e6e6; border-radius:12px; padding:14px; margin:14px 0; }
    .content{ margin-top:8px; }
    .muted{ color:var(--muted); }

    /* Zoom wrap */
    .zoom-wrap{ position:relative; overflow:hidden; border-radius:12px; background:#fff; }
    .zoom-inner{ display:block; width:100%; height:auto; user-select:none; pointer-events:none; }
    .zoom-hint{ position:absolute; left:12px; bottom:12px; background:rgba(255,255,255,0.85); color:#111; padding:6px 10px; border-radius:8px; font-size:12px; }

    /* Tools */
    .tools{ display:flex; flex-wrap:wrap; gap:6px; margin:10px 0; }
    .btn{ font-size:16px; font-weight:600; padding:8px 14px; border:1px solid #d0d0d0; border-radius:8px; background:#fff; cursor:pointer; }
    .btn.primary{ border-color:var(--accent); color:#fff; background:var(--accent); }

    /* Controls bar as compact card */
    .title{ font-size:16px; font-weight:700; }
    .controls{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-top:10px; }
    .controls label{ font-size:14px; }
    .controls select, .controls input[type="range"]{ height:32px; }

    /* Canvas and overlay */
    #canvasWrap{ position:relative; border:1px solid #e6e6e6; border-radius:12px; overflow:hidden; background:#fff; }
    #floor{ display:block; width:100%; height:auto; margin:0; background:transparent; }
    #overlay{ position:absolute; inset:0; width:100%; height:100%; }

    /* Legend */
    .legend{ margin-top:10px; }
    .row{ display:flex; gap:8px; align-items:center; }
    .swatch{ width:18px; height:4px; background:#ff3b30; border-radius:2px; }

    /* Fix extra whitespace/gaps under images and banners */
    img{ vertical-align:middle; }
    .banner{ background:#eef4ff; border:1px solid #dbe6ff; border-radius:8px; padding:8px 10px; margin:10px 0; }
    .audio-bar{ background:#fafafa; border:1px solid #eee; border-radius:8px; padding:8px 10px; margin:10px 0; }

    /* Aside visuals */
    .img-list{ display:grid; grid-template-columns: 1fr; gap:10px; }
    .img-item img{ display:block; width:100%; height:auto; border-radius:8px; background:transparent; }
     
      /* Plan area */
    #planWrap{ position:relative; background:#fff; border:1px solid #e6e6e6; border-radius:12px; overflow:hidden; }
    #planLayer{ position:relative; transform-origin: 0 0; touch-action: none; }
    #planImg{ display:block; width:100%; height:auto; user-select:none; pointer-events:none; }
    /* Optional overlay kept for future use, no drawing now */
    #routeSvg{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }

    /* Prevent stray backgrounds */
    .no-bg{ background: none !important; }

    /* Toolbar buttons: readable */
    .toolbar{ display:flex; flex-wrap:wrap; gap:6px; margin:8px 0; }
    .toolbar button{ font-size:16px; font-weight:600; padding:8px 14px; border:1px solid #d0d0d0; border-radius:8px; background:#fff; cursor:pointer; }
    .toolbar button.primary{ border-color: var(--accent); color:#fff; background:var(--accent); }

    .card h3{ font-size:16px; font-weight:700; margin:0 0 8px 0; }
    .card h4{ font-size:14px; font-weight:700; margin:0 0 6px 0; }

    #routeSteps{ margin-top:8px; }
    #routeSteps li{ margin:4px 0; }

    /* Image strip for room photos: remove extra white space */
    .imgStrip{ margin:8px 0 8px 0; padding:0; background:none; border:none; }
    .imgRow{ display:flex; gap:8px; flex-wrap:wrap; align-items:flex-start; }
    .imgWrap{ flex:1 1 320px; background:none; border:none; margin:0; padding:0; line-height:0; }
    .imgWrap img{ display:block; width:100%; height:auto; margin:0; border-radius:8px; background:transparent; }
    img{ vertical-align:middle; }
    .tight p{ margin:4px 0; }

    /* Tables */
    table{ width:100%; border-collapse:collapse; }
    th, td{ border:1px solid #ddd; padding:8px; text-align:left; }
    th{ background:#fafafa; }

    a{ color:#0a84ff; text-decoration:none; }
    a:hover{ text-decoration:underline; }
    
    footer{ margin-top:10px; color:#444; }
  </style>

<script>
    function toggleLanguage(lang) {
        document.querySelector('.english').style.display = lang === 'en' ? 'block' : 'none';
        document.querySelector('.german').style.display = lang === 'de' ? 'block' : 'none';
    }
</script>
</head>
<body>
<header>BMWTechWorks Pune - Visitor Information</header>
<div class='container'>
    <div style='text-align:center;'>
        <button class='toggle-btn' onclick="toggleLanguage('en')">English</button>
        <button class='toggle-btn' onclick="toggleLanguage('de')">Deutsch</button>
    </div>

    <div class='english'>
        <h2>Quick Links</h2>
        <div class='links'>
            <a href='https://www.olacabs.com/' target='_blank'>Ola</a>
            <a href='https://www.uber.com/in/en/' target='_blank'>Uber</a>
            <a href='https://www.zomato.com/' target='_blank'>Zomato</a>
            <a href='https://www.swiggy.com/' target='_blank'>Swiggy</a>
            <a href='https://www.xe.com/currencyconverter/' target='_blank'>INR to EUR Converter</a>
            <a href='https://www.tripadvisor.in/Attractions-g297654-Activities-Pune_Maharashtra.html' target='_blank'>Local Sightseeing</a>
        </div>

        <h2>Company Info</h2>
        <p>BMWTechWorks India official site: <a href='https://www.bmwgroup.com/en.html' target='_blank'>Visit Website</a></p>
        <p>LinkedIn: <a href='https://www.linkedin.com/company/bmwgroup/' target='_blank'>BMWTechWorks India LinkedIn</a></p>

        <h2>Emergency Contacts</h2>
        <p>Reception: +91-XXXXXXXXXX</p>
        <p>Ambulance: 108</p>
        <p>Emergency Facility Contact: +91-9769317569</p>

        <h2>Company Layout & Location</h2>
        <p>Address: BMWTechWorks India, 14 Offices, 1st Floor, Amar Tech Park, Balewadi, Pune, Maharashtra 411045</p>
        <a href='https://maps.app.goo.gl/AmarTechParkLink' target='_blank'>View on Google Maps</a> | <a href='#'>Download Building Layout (PDF)</a>

        <h2>Nearby Emergency</h2>
        <table>
            <tr><th>Category</th><th>Name & Details</th><th>Google Map Link</th></tr>
            <tr><td>Location</td><td>Amar Tech Park Office Location, Balewadi Pune 411045</td><td><a href='https://maps.app.goo.gl/AmarTechParkLink' target='_blank'>View</a></td></tr>
            <tr><td>Hospital</td><td>Jupiter Hospital, Baner 1.5 km ‚Äì Multispeciality, 24x7 Emergency</td><td><a href='https://maps.app.goo.gl/6h8X9kYvZr2JupiterHospital' target='_blank'>View</a></td></tr>
            <tr><td>Hospital</td><td>Accord Hospital, Baner 2 km ‚Äì Multispeciality</td><td><a href='https://maps.app.goo.gl/AccordHospitalLink' target='_blank'>View</a></td></tr>
            <tr><td>Hospital</td><td>Ashwini Hospital, Balewadi 1.2 km ‚Äì General Clinic & OPD</td><td><a href='https://maps.app.goo.gl/AshwiniHospitalLink' target='_blank'>View</a></td></tr>
            <tr><td>Ambulance</td><td>Jupiter Hospital Ambulance 24x7 Ambulance ‚Äì 020 2799 2799</td><td><a href='https://maps.app.goo.gl/6h8X9kYvZr2JupiterHospital' target='_blank'>View</a></td></tr>
            <tr><td>Ambulance</td><td>Mai Ambulance Services Local Ambulance ‚Äì Fast service</td><td><a href='https://maps.app.goo.gl/MaiAmbulanceLink' target='_blank'>View</a></td></tr>
            <tr><td>Ambulance</td><td>Nucare Ambulance Contact ‚Äì 90966 67656</td><td><a href='https://maps.app.goo.gl/NucareAmbulanceLink' target='_blank'>View</a></td></tr>
            <tr><td>Hotel</td><td>Holiday Inn Express Hinjewadi 3-star hotel near Balewadi</td><td><a href='https://maps.app.goo.gl/HolidayInnLink' target='_blank'>View</a></td></tr>
            <tr><td>Hotel</td><td>The Orchid Hotel 4-star hotel, Balewadi Stadium</td><td><a href='https://maps.app.goo.gl/OrchidHotelLink' target='_blank'>View</a></td></tr>
            <tr><td>Hotel</td><td>Sadanand Regency Budget hotel near Balewadi</td><td><a href='https://maps.app.goo.gl/SadanandRegencyLink' target='_blank'>View</a></td></tr>
        </table>

        <h2>Basic German to English Phrases</h2>
        <table>
            <tr><th>German</th><th>English</th></tr>
            <tr><td>Hallo</td><td>Hello / Namaste</td></tr>
            <tr><td>Ich m√∂chte zu diesem Ort gehen</td><td>I want to go to this place</td></tr>
            <tr><td>Wie viel kostet das?</td><td>How much money?</td></tr>
            <tr><td>Danke</td><td>Thanks</td></tr>
            <tr><td>Ich m√∂chte das</td><td>I want this</td></tr>
            <tr><td>Guten Morgen</td><td>Good Morning</td></tr>
            <tr><td>Gute Nacht</td><td>Good Night</td></tr>
            <tr><td>Wo ist die Toilette?</td><td>Where is the restroom?</td></tr>
            <tr><td>K√∂nnen Sie mir helfen?</td><td>Can you help me?</td></tr>
            <tr><td>Ich brauche Wasser</td><td>I need water</td></tr>
        </table>
    </div>

    <div class='german'>
        <h2>Willkommen bei BMWTechWorks Pune</h2>
        <p>Scannen Sie den QR-Code oder besuchen Sie unsere Website f√ºr weitere Informationen.</p>
    </div>
</div>
</body>
</html>

<!-- New Sections Added -->
<hr>
<h2 id='vms'>Visitor Management System (VMS)</h2>
<p>Employees can enter ATP by showing their Company ID Card at the entrance.<br>
To enter Amar Tech Park (ATP), any visitor needs a VMS Pass (Visitor Management System Pass).<br>
<b>Who is a visitor?</b> Any person who is not a BTI employee.<br>
Create a VMS pass for expected visitor by clicking on <a href='#'>Prescheduler</a>.<br>
User ID: Facilities@bmwtechworks.in (For password, please connect with facilities).</p>

<h2 id='visitor-protocol'>Visitor Entry Protocol</h2>
<ul>
<li>All visitors must report to the reception desk on the 1st floor upon arrival.</li>
<li>Enter name, time of arrival, and purpose of visit in the visitor log.</li>
<li>Meetings should be conducted in designated areas: Visitor Room or Training Room.</li>
<li>For long meetings: Host must pre-book the meeting room and escort the visitor.</li>
<li>Visitors are not permitted to move around unaccompanied. Strict action will be taken against the host if violated.</li>
</ul>

<h2 id='parking'>Parking Guidelines</h2>
<ul>
<li>Parking is strictly first-come, first-served.</li>
<li>60 slots allocated for employees at P3 and P1 levels.</li>
<li>No common parking for external visitors/vendors. They must arrange parking outside ATP premises.</li>
</ul>

<h2 id='employee-entry'>Employee Entry & Exit</h2>
<ul>
<li>Employees can use both sides of the lift for entry and exit.</li>
<li>Always wear and display your ID card.</li>
<li>Swipe your access card while entering and exiting.</li>
<li>Tailgating is strictly prohibited and considered a security violation.</li>
</ul>

  <header>
    <h2>BTI Pune ‚Äì Visitor Information</h2>
  </header>

  <div class="container">
    <div class="grid">
      <section class="card">
        <h2>Exit Plan (Zoom ‚Ä¢ Pan ‚Ä¢ Fullscreen)</h2>
        <div class="content">
          <div class="zoom-wrap" id="zoomWrap">
            <img id="zoomImg" class="zoom-inner" src="r1.png" alt="BTI Pune Exit Plan" />
            <div class="zoom-hint">Scroll/pinch to zoom ‚Ä¢ Drag to pan ‚Ä¢ Double-tap to reset</div>
          </div>

          <div class="tools">
            <button class="btn" id="btnSpeak">üîä Play Audio Guidance</button>
            <button class="btn" id="btnStop">‚èπ Stop</button>
            <button class="btn" id="btnReset">‚Ü∫ Reset View</button>
            <button class="btn" id="btnZoomIn">‚ûï Zoom In</button>
            <button class="btn" id="btnZoomOut">‚ûñ Zoom Out</button>
            <button class="btn" id="btnFullscreen">‚õ∂ Fullscreen</button>
          </div>
          <p class="muted" style="margin-top:8px">Best experienced on Chrome/Edge. Use headphones in open areas.</p>
          <header>
    <div class="title">BTI Pune ‚Ä¢ Exit Guidance</div>
    <div class="controls">
      <label>Exit:</label>
      <select id="exitSelect"></select>

      <label>Lang:</label>
      <select id="langSelect">
        <option value="en">EN</option>
        <option value="de">DE</option>
      </select>

      <button class="btn" id="play">Play</button>
      <button class="btn" id="replay">Replay</button>
      <button class="btn" id="mute">Mute</button>

      <label>Vol</label>
      <input type="range" id="vol" min="0" max="1" step="0.05" value="1" />

      <button class="btn" id="toggleTTS">TTS: On</button>
      <button class="btn" id="copyLink">Copy Deep Link</button>

      <button class="btn" id="zoomOut">‚àí</button>
      <button class="btn" id="zoomIn">+</button>
      <button class="btn" id="resetView">Reset</button>
    </div>
  </header>

  <div class="container">
    <div class="audio-bar">
      <strong>Audio:</strong>
      MP3 preferred (assets/audio/EXITx/voice_*.mp3), TTS fallback.
    </div>

    <div class="banner">
      Single QR build: Use one generic QR pointing to your hosted
      <code>index.html</code>. Deep‚Äëlinks supported via <code>?exit=5&lang=en</code>.
    </div>

    <div id="canvasWrap">
      <!-- The floor image is set by app.js to assets/r1.png and sized to the natural pixels -->
      <img id="floor" alt="Floor Map" />
      <!-- SVG overlay draws the EXIT polylines (tap to highlight + play guidance) -->
      <svg id="overlay"></svg>
    </div>

    <div class="legend">
      <div class="row">
        <div class="swatch"></div>
        <div>Active route</div>
      </div>
    </div>

    <footer>
      Tap a route to highlight and play guidance. Drag to pan. Use +/‚àí to zoom.
      Deep links: <code>?exit=5&amp;lang=en</code>
      <div id="phrase" style="margin-top:8px"></div>
    </footer>
  </div>

  <!-- Logic: pan/zoom, audio hooks (MP3 preferred, TTS fallback), deep links, JSON fallback -->
  assets/app.js</script>

  <!-- Optional: Graceful message if JS is disabled -->
  <noscript>
    <div style="padding:12px;color:#e11d48;">
      JavaScript is required for interactive routes and audio guidance.
    </div>
  </noscript>
  
        </div>
      </section>


  
      <aside class="card">
        <h2>Quick References & QR</h2>
        <div class="content">
          <div class="img-list">
            <div class="img-item">
              <img src="r5.png" alt="Lanyard Types" />
              <p class="muted">ID lanyards: Employee ‚Ä¢ Contractor ‚Ä¢ Visitor ‚Ä¢ BMW Employee</p>
            </div>
            <div class="img-item">
              <img src="r3.png" alt="Access Zones" />
              <p class="muted">Access policy map: A‚ÄìG zones with restrictions and photography notes.</p>
            </div>
          </div>

          <hr style="margin:16px 0; border-color:#1f3f74"/>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // Zoom & Pan
    (function(){
      const wrap = document.getElementById('zoomWrap');
      const img = document.getElementById('zoomImg');
      let scale = 1, min=1, max=6; let ox=0, oy=0; let down=false, sx=0, sy=0;
      function apply(){ img.style.transform = `translate(${ox}px, ${oy}px) scale(${scale})`; }
      function clamp(){ const bw=wrap.clientWidth, bh=wrap.clientHeight; const iw=img.naturalWidth, ih=img.naturalHeight; const vw=iw*scale, vh=ih*scale; const minX=Math.min(0,bw-vw), minY=Math.min(0,bh-vh); ox=Math.max(minX, Math.min(ox, 0)); oy=Math.max(minY, Math.min(oy, 0)); }
      wrap.addEventListener('wheel', (e)=>{ e.preventDefault(); const rect=wrap.getBoundingClientRect(); const mx=e.clientX-rect.left, my=e.clientY-rect.top; const prev=scale; scale=Math.min(max,Math.max(min, scale*(e.deltaY<0?1.1:0.9))); ox=mx-(mx-ox)*(scale/prev); oy=my-(my-oy)*(scale/prev); clamp(); apply(); }, {passive:false});
      wrap.addEventListener('mousedown', (e)=>{ down=true; sx=e.clientX-ox; sy=e.clientY-oy; img.classList.add('dragging'); });
      window.addEventListener('mouseup', ()=>{ down=false; img.classList.remove('dragging'); });
      window.addEventListener('mousemove', (e)=>{ if(!down) return; ox=e.clientX-sx; oy=e.clientY-sy; clamp(); apply(); });
      // Touch
      let lastX=0,lastY=0, pinchStartDist=0,pinchStartScale=1;
      wrap.addEventListener('touchstart',(e)=>{ if(e.touches.length===2){ const dx=e.touches[0].clientX-e.touches[1].clientX; const dy=e.touches[0].clientY-e.touches[1].clientY; pinchStartDist=Math.hypot(dx,dy); pinchStartScale=scale; } else if(e.touches.length===1){ lastX=e.touches[0].clientX; lastY=e.touches[0].clientY; } },{passive:true});
      wrap.addEventListener('touchmove',(e)=>{ if(e.touches.length===2){ const dx=e.touches[0].clientX-e.touches[1].clientX; const dy=e.touches[0].clientY-e.touches[1].clientY; const dist=Math.hypot(dx,dy); scale=Math.min(max,Math.max(min,pinchStartScale*(dist/pinchStartDist))); apply(); } else if(e.touches.length===1){ const nx=e.touches[0].clientX, ny=e.touches[0].clientY; ox+=(nx-lastX); oy+=(ny-lastY); lastX=nx; lastY=ny; clamp(); apply(); } },{passive:true});
      // Reset & buttons
      document.getElementById('btnReset').addEventListener('click',()=>{ scale=1; ox=0; oy=0; apply(); });
      document.getElementById('btnZoomIn').addEventListener('click',()=>{ scale=Math.min(max, scale*1.2); apply(); });
      document.getElementById('btnZoomOut').addEventListener('click',()=>{ scale=Math.max(min, scale/1.2); apply(); });
      document.getElementById('btnFullscreen').addEventListener('click',()=>{ if(wrap.requestFullscreen) wrap.requestFullscreen(); });
      img.addEventListener('load', ()=>{ scale=1; ox=0; oy=0; apply(); });
      // Double-tap
      let lastTap=0; wrap.addEventListener('click',()=>{ const now=Date.now(); if(now-lastTap<350){ scale=1; ox=0; oy=0; apply(); } lastTap=now; });
    })();

    // Audio guidance
    (function(){
      const speechText = [
        'Welcome to BTI Pune. Follow the green arrows on the map to the nearest emergency exit.',
        'From your current location, move towards the main corridor and look for EXIT signs 1 through 5.',
        'Use staircases only. Do not use elevators during evacuation.',
        'Exit the building and assemble at the muster point near the main gate.',
        'Security and fire wardens will assist you. Stay calm and wait for the all‚Äëclear.'
      ].join('
');
      let u=null; const speakBtn=document.getElementById('btnSpeak'); const stopBtn=document.getElementById('btnStop');
      function speak(){ if(!('speechSynthesis' in window)){ alert('Speech Synthesis not supported in this browser.'); return; } window.speechSynthesis.cancel(); u=new SpeechSynthesisUtterance(speechText); u.rate=1; u.pitch=1; const voices=window.speechSynthesis.getVoices(); const prefer=voices.find(v=>/en-IN/i.test(v.lang))||voices.find(v=>/en/i.test(v.lang)); if(prefer) u.voice=prefer; window.speechSynthesis.speak(u); }
      speakBtn.addEventListener('click', speak); stopBtn.addEventListener('click', ()=>window.speechSynthesis.cancel());
      window.speechSynthesis.onvoiceschanged = function(){};
    })();

    // Print helper
    document.getElementById('btnPrint').addEventListener('click', ()=>{ window.print(); });
  </script>
 <header>
    <h2>BMWTechWorks Pune ‚Äì Meeting Rooms</h2>
  </header>

  <main class="grid">
    <section id="planWrap" class="card">
      <div id="planLayer">
        <img id="planImg" src="r2.png" alt="BTI Pune floor plan"/>
        <!-- Optional SVG overlay kept for future use; not drawing any route now -->
        <svg id="routeSvg" viewBox="0 0 100 100" preserveAspectRatio="none"></svg>
      </div>
      <p class="muted">Key rooms: Success, Inspire, Joy, Debug, iDrive, M‚ÄëMode, Drift, xDrive, Torque.</p>
      <p class="muted" style="margin:8px 0 0 0">Drag to pan; use +/‚àí to zoom.</p>
    </section>

    <section class="card">
      <div class="card">
        <h3>Room Route Finder</h3>
        <label for="roomSel">Choose Meeting room:</label>
        <div class="toolbar">
          <button id="zoomIn" title="Zoom in">Ôºã</button>
          <button id="zoomOut" title="Zoom out">Ôºç</button>
          <button id="reset" title="Reset view">Reset</button>
          <button id="clearRoute" class="primary" title="Clear text & audio">Clear</button>
          <button id="langToggle" title="Toggle language">EN / DE</button>
        </div>
        <select id="roomSel">
          <option value="">‚Äî Select ‚Äî</option>
          <option>Success</option>
          <option>Inspire</option>
          <option>Joy</option>
          <option>Debug</option>
          <option>iDrive</option>
          <option>M-Mode</option>
          <option>Drift</option>
          <option>xDrive</option>
          <option>Torque</option>
        </select>
        <ol id="routeSteps" class="muted" style="margin-top:8px"></ol>
      </div>

      <div id="audioPanel" class="card">
        <h4>Audio Guidance (TTS)</h4>
        <div class="toolbar">
          <button id="playAudio">Play</button>
          <button id="stopAudio">Stop</button>
          <span id="audioStatus" class="muted"></span>
        </div>
        <p class="muted" style="margin-top:6px">Tap <strong>Play</strong> after selecting a room.</p>
      </div>
    </section>
  </main>

  <script>
    // Data
    const routePaths = {
      Success:[[0.120,0.550],[0.100,0.480],[0.080,0.360],[0.060,0.300]],
      Inspire:[[0.120,0.550],[0.100,0.480],[0.085,0.400]],
      Joy:[[0.120,0.550],[0.140,0.560]],
      Debug:[[0.120,0.550],[0.300,0.550],[0.410,0.520]],
      iDrive:[[0.120,0.550],[0.300,0.550],[0.530,0.540]],
      'M-Mode':[[0.120,0.550],[0.300,0.550],[0.640,0.560]],
      Drift:[[0.120,0.550],[0.300,0.550],[0.740,0.560],[0.800,0.560]],
      xDrive:[[0.120,0.550],[0.300,0.550],[0.820,0.550],[0.880,0.540]],
      Torque:[[0.120,0.550],[0.300,0.550],[0.860,0.540],[0.940,0.540]]
    };

    const routeText = {
      en: {
        Success: ['Reception ‚Üí left corridor', 'Proceed up to board room', 'Success (Board)'],
        Inspire: ['Reception ‚Üí left corridor', 'Training room next to Success'],
        Joy: ['Reception ‚Üí left corridor', 'Joy is near Visitor area'],
        Debug: ['Reception ‚Üí main corridor', 'Continue to middle section', 'Debug lab is at center'],
        iDrive: ['Reception ‚Üí main corridor', 'Pass Debug', 'iDrive opposite Debug'],
        'M-Mode': ['Reception ‚Üí main corridor', 'Turn right', 'M‚ÄëMode corner room'],
        Drift: ['Reception ‚Üí main corridor', 'Turn right into side corridor ‚Üí T‚Äëjunction', 'Drift next to xDrive'],
        xDrive: ['Reception ‚Üí main corridor', 'Turn right into side corridor', 'xDrive near Torque'],
        Torque: ['Reception ‚Üí far right end', 'Opposite xDrive', 'Torque room']
      },
      de: {
        Success:['Empfang ‚Üí linker Flur','Bis zum Boardroom','Success (Board)'],
        Inspire:['Empfang ‚Üí linker Flur','Schulungsraum neben Success'],
        Joy:['Empfang ‚Üí linker Flur','Joy nahe Besucherbereich'],
        Debug:['Empfang ‚Üí Hauptflur','Weiter zum Mittelteil','Debug‚ÄëLabor im Zentrum'],
        iDrive:['Empfang ‚Üí Hauptflur','An Debug vorbei','iDrive gegen√ºber Debug'],
        'M-Mode':['Empfang ‚Üí Hauptflur','Nach rechts abbiegen','M‚ÄëMode Eckraum'],
        Drift:['Empfang ‚Üí Hauptflur','Rechts in Seitenflur ‚Üí T‚ÄëKreuzung','Drift neben xDrive'],
        xDrive:['Empfang ‚Üí Hauptflur','Rechts in Seitenflur','xDrive nahe Torque'],
        Torque:['Empfang ‚Üí ganz rechts','Gegen√ºber xDrive','Torque‚ÄëRaum']
      }
    };

    // Pan/zoom
    const layer = document.getElementById('planLayer');
    const svg = document.getElementById('routeSvg'); // present but unused for drawing
    let scale = 1, tx = 0, ty = 0; let dragging = false, px = 0, py = 0;
    function apply(){ layer.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`; }
    apply();
    document.getElementById('zoomIn').onclick = ()=>{ scale = Math.min(4, scale + 0.15); apply(); };
    document.getElementById('zoomOut').onclick = ()=>{ scale = Math.max(0.5, scale - 0.15); apply(); };

    // Reset: clear text + audio and reset view (+ empty dropdown)
    const sel = document.getElementById('roomSel');
    const steps = document.getElementById('routeSteps');

    document.getElementById('reset').onclick = ()=>{
      scale = 1; tx = 0; ty = 0; apply();
      clearSvg(); steps.innerHTML=''; stopTTS(); sel.value='';
    };

    layer.addEventListener('pointerdown', (e)=>{ dragging = true; px = e.clientX; py = e.clientY; layer.setPointerCapture(e.pointerId); });
    layer.addEventListener('pointermove', (e)=>{ if(!dragging) return; const dx = e.clientX - px; const dy = e.clientY - py; tx += dx; ty += dy; px = e.clientX; py = e.clientY; apply(); });
    layer.addEventListener('pointerup', ()=> dragging=false);

    // No route drawing
    function clearSvg(){ if(svg) svg.innerHTML=''; }
    function drawRoute(room){ clearSvg(); return; }

    // Selection + language (text + TTS only)
    let currentLang = (new URLSearchParams(location.search)).get('lang') || 'en';

    function selectRoom(room){
      if(!room){ steps.innerHTML=''; clearSvg(); stopTTS(); return; }
      sel.value = room;
      steps.innerHTML='';
      (routeText[currentLang][room]||[]).forEach(s=>{ const li=document.createElement('li'); li.textContent=s; steps.appendChild(li); });
      // drawRoute(room); // intentionally not drawing any route
      updateVoiceStatus();
    }

    sel.addEventListener('change', ()=> selectRoom(sel.value));
    document.getElementById('langToggle').onclick = ()=>{ currentLang = (currentLang==='en')?'de':'en'; selectRoom(sel.value); };

    // Audio via Web Speech API (TTS)
    const audioStatus = document.getElementById('audioStatus');
    let voices = []; function loadVoices(){ voices = window.speechSynthesis.getVoices(); }
    loadVoices(); window.speechSynthesis.onvoiceschanged = loadVoices;

    function pickVoice(langCode){
      const exact = voices.find(v=>v.lang.toLowerCase()===langCode.toLowerCase());
      if(exact) return exact;
      const prefix = langCode.split('-')[0];
      const starts = voices.find(v=>v.lang.toLowerCase().startsWith(prefix.toLowerCase()));
      if(starts) return starts;
      return voices[0] || null;
    }

    function buildSpeechText(room, lang){ const lines = routeText[lang][room] || []; return lines.join('. '); }

    let currentUtterance = null;
    function stopTTS(){ if(currentUtterance){ window.speechSynthesis.cancel(); currentUtterance = null; } else { window.speechSynthesis.cancel(); } audioStatus.textContent = ''; }

    function speakSteps(room, lang){
      stopTTS();
      if(!room){ audioStatus.textContent='Select a room first.'; return; }
      const text = buildSpeechText(room, lang);
      if(!text){ audioStatus.textContent = 'No audio text available.'; return; }
      const voice = pickVoice(lang==='de' ? 'de-DE' : 'en-US');
      const utter = new SpeechSynthesisUtterance(text);
      if(voice) utter.voice = voice;
      utter.rate = 1.0; utter.pitch = 1.0;
      utter.onstart = ()=>{ audioStatus.textContent = `Speaking (${(voice && voice.lang) || (lang==='de'?'de-DE':'en-US')})‚Ä¶`; };
      utter.onend   = ()=>{ audioStatus.textContent = 'Done.'; setTimeout(()=> audioStatus.textContent='', 800); };
      utter.onerror = ()=>{ audioStatus.textContent = 'Speech error. Try again.'; };
      currentUtterance = utter;
      window.speechSynthesis.speak(utter);
    }

    document.getElementById('playAudio').onclick = ()=> speakSteps(sel.value, currentLang);
    document.getElementById('stopAudio').onclick = ()=> stopTTS();

    // Clear: text + audio (keeps zoom/pan)
    document.getElementById('clearRoute').onclick = ()=>{ clearSvg(); steps.innerHTML=''; stopTTS(); sel.value=''; };

    // Deep link (shows text + TTS only)
    const qs = new URLSearchParams(location.search);
    const initialRoom = qs.get('room');
    if(initialRoom && routeText.en[initialRoom]){ sel.value = initialRoom; selectRoom(initialRoom); }
  </script>
<h2 id='safety'>Safety & Emergency</h2>
<p>Emergency escape route layout is pasted in designated areas.<br>
<b>Emergency Response Team (ERT) Members:</b></p>
<ul>
<li>DPE: Yogesh Tambat, Zulqurnain Khan</li>
<li>Digital Company: Rishabh Kundal</li>
<li>Software Factory: Sandesh Gharal</li>
<li>Driving ECU: Vivek Patil, Ganesh Garg</li>
<li>SSP: Aniket Patil, Chahul Turkar</li>
<li>AIML & Infotainment: Pravinkumar Kale</li>
<li>Connected Vehicle: Rajiv Rengasamy</li>
</ul>

<h2 id='facility'>Facility Concerns & Reporting</h2>
<p>Email: Facilities@bmwtechworks.in for facility-related concerns and unsafe acts/conditions.</p>

<h2 id='social-media'>Social Media & Contact</h2>
<p>
<a href='https://www.linkedin.com'>LinkedIn</a> |
<a href='https://www.facebook.com'>Facebook</a> |
<a href='https://www.youtube.com'>YouTube</a><br>
Website: <a href='https://bmwtechworks.in'>bmwtechworks.in</a>
</p>

  <footer style="text-align:center; padding:12px; color:var(--muted)">
       ¬© BTI Pune ‚Äî Visitor Info.
      ***Developed By BTI-Digital CAR -SPP Team ***
      @Copyright BTI-Digital CAR PUNE-SPP Team -2025
  </footer>
