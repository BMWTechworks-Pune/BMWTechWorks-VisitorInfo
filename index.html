
<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BMWTechWorks India ‚Äì PUNE</title>
    <meta name="description" content="Quick actions: Info, SOS, Floor Layout & Exit, ERT Members, First Aid, Assembly Points, Meeting Rooms, Need Assistance (Escalation), IT Helpdesk, German ‚Üî English, Parking, Social Media, Travel & Info, QR Share/Download." />
    <style>
      :root{
        --bg:#eaf4ff; --panel:#b7e4c7; --panel-text:#0b3d2e; --text:#0e1b25;
        --btn:#0b78b6; --btn-red:#d32f2f; --btn-grey:#5e6a64; --card:#ffffff; --border:#cbd6e8;
        --shadow:rgba(0,0,0,0.12); --radius:12px; --muted:#557a89; --dot:#2bb673;
      }
      html,body{height:100%}
      body{margin:0;background:var(--bg);color:var(--text);
           font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Helvetica Neue",Arial,sans-serif}
      .wrap{max-width:740px;margin:0 auto;padding:10px 12px 28px}
      .hero{background:var(--panel);color:var(--panel-text);border-radius:0 0 var(--radius) var(--radius);
            padding:10px 12px;display:flex;align-items:center;gap:10px;box-shadow:0 6px 18px var(--shadow)}
      .brand{width:28px;height:28px;border-radius:50%;overflow:hidden}
      .brand svg{width:100%;height:100%}
      .hero h1{margin:0;font-size:0.95rem}
      .lang{display:flex;gap:10px;justify-content:center;margin:12px 0 10px}
      .lang button{flex:1;max-width:140px;padding:9px 0;border-radius:10px;border:1px solid var(--border);background:#f5f9ff;cursor:pointer;font-size:0.88rem}
      .lang button.active{background:#67736e;color:#fff;border-color:#67736e}
      nav.list{display:flex;flex-direction:column;gap:9px;margin:8px 0 16px}
      .btn{border:none;border-radius:12px;padding:11px 13px;font-size:0.88rem;cursor:pointer;color:#fff;background:var(--btn);box-shadow:0 6px 14px var(--shadow);display:flex;align-items:center;gap:10px}
      .btn.red{background:var(--btn-red)} .btn.grey{background:var(--btn-grey)} .emoji{font-size:1.02rem}
      .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 4px 12px var(--shadow);border:1px solid var(--border)}
      .card h2{margin:0 0 8px;font-size:0.96rem;color:#17394a}
      .list-ul{margin:0;padding-left:18px;font-size:0.9rem}
      a{color:#005ea8;text-decoration:none} a:hover{text-decoration:underline}
      .note{font-size:0.85rem;color:var(--muted);text-align:center;margin-top:8px}
      footer{margin:18px 0 8px;text-align:center;color:#5a6b74;font-size:0.84rem}
      /* zoom viewport */
      .zoombox{margin-top:8px}
      .zoomtools{display:flex;gap:8px;justify-content:flex-end;margin-bottom:6px}
      .zoomtools button{padding:6px 10px;border:1px solid var(--border);border-radius:8px;background:#f5f9ff;color:#17394a;cursor:pointer}
      .viewport{width:100%;height:320px;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#f5f9ff;touch-action:none}
      .content{transform-origin:0 0;position:relative;width:fit-content;height:fit-content}
      .overlay{position:absolute;left:0;top:0}
      .assistwrap{overflow-x:auto}
      table.assist{width:100%;border-collapse:collapse;font-size:0.88rem}
      table.assist th,table.assist td{border:1px solid var(--border);padding:8px 10px;text-align:left}
      table.assist thead th{background:#f5f9ff;color:#17394a}
      table.assist tbody tr:nth-child(odd){background:#fbfdff}
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="hero" role="banner">
        <span class="brand" aria-label="BMW logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" aria-hidden="true">
            <circle cx="32" cy="32" r="30" fill="#0a0c10"/>
            <circle cx="32" cy="32" r="22" fill="#ffffff"/>
            <path d="M32,10 A22,22 0 0 1 54,32 H32 Z" fill="#00a0e3"/>
            <path d="M32,54 A22,22 0 0 1 10,32 H32 Z" fill="#00a0e3"/>
          </svg>
        </span>
        <h1 id="title">BMWTechWorks India ‚Äì PUNE</h1>
      </div>

      <div class="lang" role="group" aria-label="Language selector">
        <button id="langEN" class="active">EN</button>
        <button id="langDE">DE</button>
      </div>

      <nav class="list" aria-label="Quick actions">
        <button class="btn" data-section="info"><span class="emoji">‚ÑπÔ∏è</span><span id="btn_info">BMWTechWorks Info</span></button>
        <button class="btn red" data-section="sos"><span class="emoji">üö®</span><span id="btn_sos">SOS ‚Äì Emergency</span></button>
        <button class="btn" data-section="assist"><span class="emoji">üÜò</span><span id="btn_assist">Need Assistance</span></button>
        <button class="btn" data-section="floor"><span class="emoji">üó∫Ô∏è</span><span id="btn_floor">Floor Layout & Exit</span></button>
        <button class="btn" data-section="ert"><span class="emoji">üõ°Ô∏è</span><span id="btn_ert">ERT Members</span></button>
        <button class="btn" data-section="firstaid"><span class="emoji">üßë‚Äç‚öïÔ∏è</span><span id="btn_firstaid">First Aid & Medical Support</span></button>
        <button class="btn" data-section="assembly"><span class="emoji">üìç</span><span id="btn_assembly">Assembly Points</span></button>
        <button class="btn" data-section="rooms"><span class="emoji">üè¢</span><span id="btn_rooms">Meeting Rooms</span></button>
        <button class="btn" data-section="it"><span class="emoji">üñ•Ô∏è</span><span id="btn_it">IT Helpdesk</span></button>
        <button class="btn" data-section="lang"><span class="emoji">üåç</span><span id="btn_lang">German ‚Üî English</span></button>
        <button class="btn" data-section="parking"><span class="emoji">üÖøÔ∏è</span><span id="btn_parking">Parking Info</span></button>
        <button class="btn" data-section="travel"><span class="emoji">üß≠</span><span id="btn_travel">Travel Info & Converter</span></button>
        <button class="btn grey" id="share"><span class="emoji">üì§</span><span id="btn_share">Share</span></button>
        <button class="btn grey" id="download"><span class="emoji">üì•</span><span id="btn_download">Download</span></button>
      </nav>

      <!-- All cards start hidden so only clicked section shows -->
      <section id="infoCard" class="card" aria-labelledby="infoTitle" hidden>
        <h2 id="infoTitle">BMWTechWorks India</h2>
        <p id="infoAddr">Address: BMWTechWorks India, 14 Offices, 1st Floor, Amar Tech Park, Balewadi, Pune, Maharashtra 411045</p>
        <p><a id="infoLink" href="https://maps.app.goo.gl/AmarTechParkLink" target="_blank" rel="noopener">View on Google Maps</a></p>
        <div class="imgframe" aria-label="Google Map">
          <iframe title="Amar Tech Park Map" src="https://www.google.com/maps?q=Amar+Tech+Park+Balewadi+Pune&output=embed" width="100%" height="280" style="border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </section>

        <section id="sosCard" class="card" aria-labelledby="sosTitle" hidden>
        <h2 id="sosTitle">SOS ‚Äì Emergency</h2>
        <ul id="sosList" class="list-ul">
          <li>Ambulance: 108</li>
          <li>Emergency Contact: +91-XXXXXXXXXX</li>
          <li>First Aid: Reception ‚Ä¢ Nurse Room: Floor 6</li>
        </ul>
      </section>
      
      <section id="assistCard" class="card" aria-labelledby="assistTitle" hidden>
        <h2 id="assistTitle">Escalation Matrix ‚Äì Facilities Team</h2>
        <ul id="assistList" class="list-ul">
          <li><strong>Dhananjay Maske (First Level)</strong> ‚Äî Facilities Specilities, Amar Tech Park Facility, Pune
            &nbsp;|&nbsp;<a href="mailto:Dhananjay.maske@bmwtechworks.in?subject=Facility%20Assistance">üìß Email</a>
            &nbsp;|&nbsp;<a href="tel:+919657893928">üìû 9657893928</a>
          </li>
          <li><strong>Minal Pinto (Second Level)</strong> ‚Äî Head of Facilities &amp; Workplace, Corporate Office, Pune
            &nbsp;|&nbsp;<a href="mailto:Minal.pinto@bmwtechwork.in?subject=Facility%20Assistance">üìß Email</a>
            &nbsp;|&nbsp;<a href="tel:+919769317569">üìû 9769317569</a>
          </li>
          <li><strong>Vishwas Muthyala (Third Level)</strong> ‚Äî CHRO, Corporate Office, Pune
            &nbsp;|&nbsp;<a href="mailto:vishwas.muthyala@bmwtechworks.in?subject=Facility%20Assistance">üìß Email</a>
            &nbsp;|&nbsp;<a href="tel:+919145002446">üìû 9145002446</a>
          </li>
        </ul>
     
      </section>

      <section id="floorCard" class="card" aria-labelledby="floorTitle" hidden>
        <h2 id="floorTitle">Floor Layout & Exit</h2>
        <div class="zoombox">
          <div class="zoomtools">
            <button type="button" id="exitZoomIn">Ôºã Zoom In</button>
            <button type="button" id="exitZoomOut">Ôºç Zoom Out</button>
            <button type="button" id="exitReset">‚§ø Reset</button>
          </div>
          <div class="viewport" id="exitViewport">
            <div class="content" id="exitContent">
              <svg id="exitMap" viewBox="0 0 1200 720" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Simplified exit plan" style="display:block;width:1200px;height:720px;background:#f5f9ff">
                <rect x="10" y="10" width="1180" height="700" fill="#e9f2fb" stroke="#cbd6e8" />
                <rect x="20" y="20" width="520" height="240" fill="#dff0ff" stroke="#cbd6e8"/>
                <rect x="660" y="20" width="520" height="240" fill="#dff0ff" stroke="#cbd6e8"/>
                <rect x="20" y="300" width="520" height="390" fill="#dff0ff" stroke="#cbd6e8"/>
                <rect x="660" y="300" width="520" height="390" fill="#dff0ff" stroke="#cbd6e8"/>
                <g fill="#d32f2f" font-family="sans-serif" font-size="20">
                  <text x="600" y="28">EXIT 1</text>
                  <text x="600" y="714">EXIT 2</text>
                  <text x="24" y="310">EXIT 3</text>
                  <text x="1166" y="310">EXIT 4</text>
                  <text x="600" y="310">EXIT 5</text>
                </g>
              </svg>
              <canvas id="exitOverlay" class="overlay"></canvas>
            </div>
          </div>
        </div>
        <p class="note">Note: Photography is allowed at C &amp; D areas only.</p>
      </section>

      <section id="ertCard" class="card" aria-labelledby="ertTitle" hidden>
        <h2 id="ertTitle">Emergency Response Team (ERT)</h2>
        <div class="assistwrap">
          <table class="assist" role="table" aria-label="Emergency Response Team">
            <thead>
              <tr><th>Department</th><th>Nominated ERT members</th></tr>
            </thead>
            <tbody>
              <tr><td>DPE</td><td>Yogesh Tambat; Zulqurnain Khan</td></tr>
              <tr><td>Digital Company</td><td>Rishabh Kundal</td></tr>
              <tr><td>Software Factory</td><td>Sandesh Gharal; Shubham Jambekar</td></tr>
              <tr><td>Driving ECU</td><td>Vivek Patil; Ganesh Garg</td></tr>
              <tr><td>SSP</td><td>Aniket Patil; Chahul Turkar</td></tr>
              <tr><td>AIML &amp; Infotainment</td><td>Pravinkumar Kale; Vipin Yadav</td></tr>
              <tr><td>Connected Vehicle</td><td>Rajiv Rengasamy; Sohan Dalwadi</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="firstaidCard" class="card" aria-labelledby="firstaidTitle" hidden>
        <h2 id="firstaidTitle">First Aid &amp; Medical Support</h2>
        <ul id="firstaidList" class="list-ul">
          <li>First Aid Kit ‚Äì Reception</li>
          <li>Nurse Room ‚Äì Floor 6</li>
          <li>Wheelchair &amp; Stretcher available</li>
        </ul>
      </section>

    
       <section id="assemblyCard" class="card" aria-labelledby="assemblyTitle" hidden>
        <h2 id="assemblyTitle">Assembly Points</h2>
        <div class="grid-2">
          <div>
            <p id="ap1Text">Assembly Point No.1 Near Gate No-4</p>
            <div class="imgframe">
              <img id="ap1Img" src="Assembly Point No.1 Near Gate No-4.jpg" alt="Assembly Point No.1 Near Gate No-4"
                   onerror="this.style.display='none'; document.getElementById('ap1ph').hidden=false;">
            </div>
            <div id="ap1ph" class="placeholder" hidden>AP1 image ‚Äì PLACEHOLDER</div>
          </div>
          <div>
            <p id="ap2Text">Assembly Point No.2 Near Gate No-3</p>
            <div class="imgframe">
              <img id="ap2Img" src="Assembly Point No.2 Near Gate No-3.jpg" alt="Assembly Point No.2 Near Gate No-3"
                   onerror="this.style.display='none'; document.getElementById('ap2ph').hidden=false;">
            </div>
            <div id="ap2ph" class="placeholder" hidden>AP2 image ‚Äì PLACEHOLDER</div>
          </div>
        </div>
      </section>
      

      <section id="roomsCard" class="card" aria-labelledby="roomsTitle" hidden>
        <h2 id="roomsTitle">Meeting Rooms</h2>
        <div class="zoombox">
          <div class="zoomtools">
            <button type="button" id="roomsZoomIn">Ôºã Zoom In</button>
            <button type="button" id="roomsZoomOut">Ôºç Zoom Out</button>
            <button type="button" id="roomsReset">‚§ø Reset</button>
          </div>
          <div class="viewport" id="roomsViewport">
            <div class="content" id="roomsContent">
              <img src="r2.png" id="roomsImage" alt="Meeting rooms floor plan" />
              <canvas id="roomsOverlay" class="overlay"></canvas>
            </div>
          </div>
        </div>
        <div class="routebar">
          <label for="fromRoom">From</label>
          <select id="fromRoom"></select>
          <label for="toRoom">To</label>
          <select id="toRoom"></select>
          <button type="button" id="roomsShowRoute">Show Route</button>
          <button type="button" id="roomsSpeakRoute">üîä Play Audio</button>
        </div>
        <p id="roomsRouteText" class="note">Select a source and destination room, then tap "Show Route". Follow the green dots.</p>
      </section>

      <section id="itCard" class="card" aria-labelledby="itTitle" hidden>
        <h2 id="itTitle">IT Helpdesk</h2>
        <p id="itDesc">Email: ITHelpdesk.PNQ@bmwtechworks.in</p>
      </section>

      <section id="langCard" class="card" aria-labelledby="langTitle" hidden>
        <h2 id="langTitle">Basic German to English Phrases</h2>
        <div class="tablewrap">
          <table style="width:100%;border-collapse:collapse;font-size:0.88rem">
            <thead><tr><th style="text-align:left;padding:8px;border-bottom:1px solid var(--border)">German</th><th style="text-align:left;padding:8px;border-bottom:1px solid var(--border)">English</th></tr></thead>
            <tbody>
              <tr><td style="padding:8px">Hallo</td><td style="padding:8px">Hello / Namaste</td></tr>
              <tr><td style="padding:8px">Ich m√∂chte zu diesem Ort gehen</td><td style="padding:8px">I want to go to this place</td></tr>
              <tr><td style="padding:8px">Wie viel kostet das?</td><td style="padding:8px">How much money?</td></tr>
              <tr><td style="padding:8px">Danke</td><td style="padding:8px">Thanks</td></tr>
              <tr><td style="padding:8px">Ich m√∂chte das</td><td style="padding:8px">I want this</td></tr>
              <tr><td style="padding:8px">Guten Morgen</td><td style="padding:8px">Good Morning</td></tr>
              <tr><td style="padding:8px">Gute Nacht</td><td style="padding:8px">Good Night</td></tr>
              <tr><td style="padding:8px">Wo ist die Toilette?</td><td style="padding:8px">Where is the restroom?</td></tr>
              <tr><td style="padding:8px">K√∂nnen Sie mir helfen?</td><td style="padding:8px">Can you help me?</td></tr>
              <tr><td style="padding:8px">Ich brauche Wasser</td><td style="padding:8px">I need water</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="parkingCard" class="card" aria-labelledby="parkingTitle" hidden>
        <h2 id="parkingTitle">Parking Guidelines</h2>
        <ul id="parkingList" class="list-ul">
          <li>Parking is strictly first-come, first-served.</li>
          <li>60 slots allocated for employees at P3 and P1 levels.</li>
          <li>No common parking for external visitors/vendors. They must arrange parking outside ATP premises.</li>
        </ul>
      </section>

      <section id="travelCard" class="card" aria-labelledby="travelTitle" hidden>
        <h2 id="travelTitle">Travel Info and Currency converter</h2>
        <ul class="list-ul" id="travelList">
          <li>üí± <a href="https://www.xe.com/currencyconverter/" target="_blank" rel="noopener">INR ‚Üí EUR Converter (XE)</a></li>
          <li>üèôÔ∏è <a href="https://www.tripadvisor.in/Attractions-g297654-Activities-Pune_Maharashtra.html" target="_blank" rel="noopener">Local Sightseeing in Pune (Tripadvisor)</a></li>
        </ul>
      </section>

      <section id="socialCard" class="card" aria-labelledby="socialTitle" hidden>
        <h2 id="socialTitle">Social Media &amp; Contact</h2>
        <p><a href="https://www.linkedin.com" target="_blank" rel="noopener">LinkedIn</a> | Website: <a href="https://bmwtechworks.in" target="_blank" rel="noopener">bmwtechworks.in</a></p>
      </section>

        <p class="note">üîí No personal data collected ‚Ä¢ No cookies ‚Ä¢ Works offline after first load</p>
      <footer>¬© Developed by SPP Team ‚Äì BTI Pune 2026   </footer>
    </div>

    <script>
      // i18n strings ‚Äì adds German labels for Travel & Assistance titles
      const STRINGS = {
        EN: {
          buttons: {
            info:'BMWTechWorks Info', sos:'SOS ‚Äì Emergency', assist:'Need Assistance', floor:'Floor Layout & Exit',
            ert:'ERT Members', firstaid:'First Aid & Medical Support', assembly:'Assembly Points', rooms:'Meeting Rooms',
            it:'IT Helpdesk', lang:'German ‚Üî English', parking:'Parking Info', travel:'Travel Info & Converter', share:'Share', download:'Download'
          },
          sections: {
            infoTitle:'BMWTechWorks India',
            assistTitle:'Escalation Matrix ‚Äì Facilities Team',
            floorTitle:'Floor Layout & Exit', ertTitle:'Emergency Response Team (ERT)', firstaidTitle:'First Aid & Medical Support',
            assemblyTitle:'Assembly Points', roomsTitle:'Meeting Rooms', itTitle:'IT Helpdesk', langTitle:'Basic German to English Phrases',
            parkingTitle:'Parking Guidelines', travelTitle:'Travel Info and Currency converter', socialTitle:'Social Media & Contact'
          }
        },
        DE: {
          buttons: {
            info:'BMWTechWorks Info', sos:'SOS ‚Äì Notfall', assist:'Hilfe ben√∂tigt', floor:'Etagenplan & Ausgang',
            ert:'ERT‚ÄëMitglieder', firstaid:'Erste Hilfe & Medizinische Unterst√ºtzung', assembly:'Sammelpl√§tze', rooms:'Besprechungsr√§ume',
            it:'IT‚ÄëHelpdesk', lang:'Deutsch ‚Üî Englisch', parking:'Parkinformationen', travel:'Reiseinformationen & W√§hrungsrechner', share:'Teilen', download:'Herunterladen'
          },
          sections: {
            infoTitle:'BMWTechWorks India',
            assistTitle:'Hilfe ben√∂tigt ‚Äì Facility Team',
            floorTitle:'Etagenplan & Ausgang', ertTitle:'Notfallteam (ERT)', firstaidTitle:'Erste Hilfe & Medizinische Unterst√ºtzung',
            assemblyTitle:'Sammelpl√§tze', roomsTitle:'Besprechungsr√§ume', itTitle:'IT‚ÄëHelpdesk', langTitle:'Grundlegende Deutsch‚ÄëEnglisch‚ÄëPhrasen',
            parkingTitle:'Parkrichtlinien', travelTitle:'Reiseinformationen und W√§hrungsrechner', socialTitle:'Soziale Medien & Kontakt'
          }
        }
      };

      function applyLang(code){
        const S = STRINGS[code] || STRINGS.EN;
        // Buttons
        document.getElementById('btn_info').textContent = S.buttons.info;
        document.getElementById('btn_sos').textContent = S.buttons.sos;
        document.getElementById('btn_assist').textContent = S.buttons.assist;
        document.getElementById('btn_floor').textContent = S.buttons.floor;
        document.getElementById('btn_ert').textContent = S.buttons.ert;
        document.getElementById('btn_firstaid').textContent = S.buttons.firstaid;
        document.getElementById('btn_assembly').textContent = S.buttons.assembly;
        document.getElementById('btn_rooms').textContent = S.buttons.rooms;
        document.getElementById('btn_it').textContent = S.buttons.it;
        document.getElementById('btn_lang').textContent = S.buttons.lang;
        document.getElementById('btn_parking').textContent = S.buttons.parking;
        document.getElementById('btn_travel').textContent = S.buttons.travel;
        document.getElementById('btn_share').textContent = S.buttons.share;
        document.getElementById('btn_download').textContent = S.buttons.download;
        // Section titles
        document.getElementById('infoTitle').textContent = S.sections.infoTitle;
        document.getElementById('assistTitle').textContent = S.sections.assistTitle;
        document.getElementById('floorTitle').textContent = S.sections.floorTitle;
        document.getElementById('ertTitle').textContent = S.sections.ertTitle;
        document.getElementById('firstaidTitle').textContent = S.sections.firstaidTitle;
        document.getElementById('assemblyTitle').textContent = S.sections.assemblyTitle;
        document.getElementById('roomsTitle').textContent = S.sections.roomsTitle;
        document.getElementById('itTitle').textContent = S.sections.itTitle;
        document.getElementById('langTitle').textContent = S.sections.langTitle;
        document.getElementById('parkingTitle').textContent = S.sections.parkingTitle;
        document.getElementById('travelTitle').textContent = S.sections.travelTitle;
        document.getElementById('socialTitle').textContent = S.sections.socialTitle;
      }

      // Pan-zoom helper
      function makePanZoom(viewportId, contentId, overlayId){
        const viewport = document.getElementById(viewportId);
        const content = document.getElementById(contentId);
        const overlay = document.getElementById(overlayId);
        if(!viewport || !content) return null;
        let scale = 1, min=0.7, max=3, tx=0, ty=0;
        function apply(){ content.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`; }
        let dragging=false, sx=0, sy=0;
        function start(e){ dragging=true; sx=(e.touches?e.touches[0].clientX:e.clientX); sy=(e.touches?e.touches[0].clientY:e.clientY); }
        function move(e){ if(!dragging) return; const x=(e.touches?e.touches[0].clientX:e.clientX), y=(e.touches?e.touches[0].clientY:e.clientY); tx+=x-sx; ty+=y-sy; sx=x; sy=y; apply(); }
        function end(){ dragging=false; }
        viewport.addEventListener('mousedown', start); viewport.addEventListener('mousemove', move); window.addEventListener('mouseup', end);
        viewport.addEventListener('touchstart', start,{passive:true}); viewport.addEventListener('touchmove', move,{passive:true}); viewport.addEventListener('touchend', end);
        viewport.addEventListener('wheel', (e)=>{ e.preventDefault(); const delta = Math.sign(e.deltaY)*-0.1; scale = Math.min(max, Math.max(min, scale+delta)); apply(); }, {passive:false});
        function zoomIn(){ scale=Math.min(max, scale+0.2); apply(); }
        function zoomOut(){ scale=Math.max(min, scale-0.2); apply(); }
        function reset(){ scale=1; tx=0; ty=0; apply(); }
        apply();
        return {zoomIn, zoomOut, reset, overlay};
      }

      // Route dots on canvas
      function drawDots(canvas, width, height, fromPct, toPct){
        if(!canvas) return; canvas.width = width; canvas.height = height; const ctx = canvas.getContext('2d');
        const fx = fromPct.x/100*width, fy = fromPct.y/100*height; const tx = toPct.x/100*width, ty = toPct.y/100*height;
        const steps = 30; ctx.clearRect(0,0,width,height);
        for(let i=0;i<=steps;i++){
          const t = i/steps; const x = fx + (tx-fx)*t; const y = fy + (ty-fy)*t;
          ctx.beginPath(); ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--dot'); ctx.arc(x,y,4,0,Math.PI*2); ctx.fill();
        }
      }

      // Rooms routing sample
      const ROOM_COORDS = {
        'Success ‚Äì Board Room': {x: 8,  y: 14}, 'Inspire ‚Äì Training Room': {x: 10, y: 28}, 'Visitor Room': {x: 14, y: 42},
        'Joy': {x: 22, y: 50}, 'Debug': {x: 48, y: 50}, 'iDrive': {x: 62, y: 54}, 'M-Mode': {x: 72, y: 54},
        'Drift': {x: 86, y: 56}, 'xDrive': {x: 90, y: 56}, 'Torque': {x: 96, y: 56}
      };
      const EXITS = { 'Exit 1': {x:50,y:2}, 'Exit 2': {x:50,y:98}, 'Exit 3': {x:2,y:50}, 'Exit 4': {x:98,y:50}, 'Exit 5': {x:50,y:50} };

      // View toggling: show only clicked card
      const map = {
        info:'infoCard', sos:'sosCard', assist:'assistCard', floor:'floorCard', ert:'ertCard', firstaid:'firstaidCard', assembly:'assemblyCard', rooms:'roomsCard', it:'itCard', lang:'langCard', parking:'parkingCard', travel:'travelCard', social:'socialCard'
      };
      document.querySelectorAll('[data-section]').forEach(btn => {
        btn.addEventListener('click', () => {
          const key = btn.getAttribute('data-section');
          for (const id of Object.values(map)) { const el = document.getElementById(id); if(el) el.hidden = (id !== map[key]); }
          const show = document.getElementById(map[key]); show?.scrollIntoView({behavior:'smooth', block:'start'});
        });
      });

      // Setup meeting rooms pan-zoom and routes
      const roomsPZ = makePanZoom('roomsViewport','roomsContent','roomsOverlay');
      if(roomsPZ){
        document.getElementById('roomsZoomIn').addEventListener('click', roomsPZ.zoomIn);
        document.getElementById('roomsZoomOut').addEventListener('click', roomsPZ.zoomOut);
        document.getElementById('roomsReset').addEventListener('click', roomsPZ.reset);
        const fromSel = document.getElementById('fromRoom'); const toSel = document.getElementById('toRoom');
        fromSel.innerHTML = Object.keys(ROOM_COORDS).map(n => `<option value="${n}">${n}</option>`).join('');
        toSel.innerHTML = fromSel.innerHTML;
        const img = document.getElementById('roomsImage');
        img.addEventListener('load', ()=>{ roomsPZ.overlay.width=img.naturalWidth; roomsPZ.overlay.height=img.naturalHeight; roomsPZ.overlay.style.width=img.width+'px'; roomsPZ.overlay.style.height=img.height+'px'; });
        document.getElementById('roomsShowRoute').addEventListener('click', ()=>{
          const from=ROOM_COORDS[fromSel.value], to=ROOM_COORDS[toSel.value]; if(!from||!to) return;
          drawDots(roomsPZ.overlay, img.naturalWidth||img.width, img.naturalHeight||img.height, from, to);
          document.getElementById('roomsRouteText').textContent = `Route from ${fromSel.value} to ${toSel.value}. Follow green dots.`;
        });
        document.getElementById('roomsSpeakRoute').addEventListener('click', ()=>{
          const txt=document.getElementById('roomsRouteText').textContent||'Follow the green dots to reach your destination.';
          const utter=new SpeechSynthesisUtterance(txt); utter.lang=(document.getElementById('langDE').classList.contains('active')?'de-DE':'en-IN'); speechSynthesis.cancel(); speechSynthesis.speak(utter);
        });
      }

      // Setup floor pan-zoom
      const exitPZ = makePanZoom('exitViewport','exitContent','exitOverlay');
      if(exitPZ){
        document.getElementById('exitZoomIn').addEventListener('click', exitPZ.zoomIn);
        document.getElementById('exitZoomOut').addEventListener('click', exitPZ.zoomOut);
        document.getElementById('exitReset').addEventListener('click', exitPZ.reset);
      }

      // QR share & download (robust)
      function makeBlobUrl(){ const svg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="256" height="256"><rect width="256" height="256" fill="#fff"/><rect x="16" y="16" width="96" height="96" fill="#000"/><rect x="144" y="16" width="96" height="96" fill="#000"/><rect x="16" y="144" width="96" height="96" fill="#000"/><rect x="120" y="120" width="24" height="24" fill="#000"/><rect x="168" y="168" width="72" height="72" fill="#000"/></svg>`; const blob=new Blob([svg],{type:'image/svg+xml'}); const url=URL.createObjectURL(blob); return {blob,url}; }
      function downloadQR(){ const {url}=makeBlobUrl(); try{ const a=document.createElement('a'); a.href=url; a.download='BTI-Visitor-QR.svg'; document.body.appendChild(a); a.click(); a.remove(); } finally{ setTimeout(()=>URL.revokeObjectURL(url),2000); } }
      async function shareQR(){ const {blob,url}=makeBlobUrl(); try{ const file=new File([blob],'BTI-Visitor-QR.svg',{type:'image/svg+xml'}); if(navigator.share && navigator.canShare && navigator.canShare({files:[file]})){ await navigator.share({files:[file], title:'BTI Visitor QR'}); return; } if(navigator.share){ await navigator.share({ title:'BTI Visitor Info', text:'Open the visitor info page:', url:location.href }); return; } window.open(url,'_blank'); } catch(e){ window.open(url,'_blank'); } finally{ setTimeout(()=>URL.revokeObjectURL(url),2000); } }
      const btnDownload=document.getElementById('download'); const btnShare=document.getElementById('share');
      if(btnDownload) btnDownload.addEventListener('click', downloadQR);
      if(btnShare) btnShare.addEventListener('click', shareQR);

      // Language toggle
      function setLang(code){
        const en = code === 'EN';
        document.getElementById('langEN').classList.toggle('active', en);
        document.getElementById('langDE').classList.toggle('active', !en);
        applyLang(code);
        localStorage.setItem('BTI_LANG', code);
      }
      document.getElementById('langEN').addEventListener('click', ()=>setLang('EN'));
      document.getElementById('langDE').addEventListener('click', ()=>setLang('DE'));
      setLang(localStorage.getItem('BTI_LANG') || 'EN');
    </script>
  </body>
</html>
