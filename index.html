<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BTI‚ÄìSPP Gamified Onboarding</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <div class="container">
    <div id="carAnim" class="car-anim hidden" aria-hidden="true">
      <svg viewBox="0 0 200 80" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="cargrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#0066B1"/>
            <stop offset="100%" stop-color="#6CB8FF"/>
          </linearGradient>
        </defs>
        <!-- simple stylized BMW-themed car -->
        <rect x="40" y="30" width="120" height="26" rx="6" fill="url(#cargrad)" stroke="#1f2430" stroke-width="2"/>
        <rect x="60" y="22" width="56" height="16" rx="4" fill="#cfe6ff" stroke="#1f2430" stroke-width="2"/>
        <circle cx="68" cy="58" r="8" fill="#111" stroke="#444" stroke-width="2"/>
        <circle cx="132" cy="58" r="8" fill="#111" stroke="#444" stroke-width="2"/>
        <circle cx="68" cy="58" r="3" fill="#6CB8FF"/>
        <circle cx="132" cy="58" r="3" fill="#6CB8FF"/>
        <text x="100" y="50" fill="#fff" font-size="10" text-anchor="middle" font-family="Segoe UI, Arial">BMW</text>
      </svg>
    </div>
    <div class="header">
      <img src="bmw-logo.svg" alt="BMW Logo" class="bmw-logo" />
      <div class="title">
        <h1>BTI‚ÄìSPP Gamified Onboarding</h1>
        <p>Common entry ‚Üí Week 1 (SSP common) ‚Üí Weeks 2‚Äì3 (team-wise)</p>
      </div>
    </div>

    <!-- LOGIN (captures Team too) -->
    <div class="login" id="loginPanel">
      <div class="row">
        <input id="login_name" class="input" type="text" placeholder="Your name" />
        <input id="login_email" class="input" type="email" placeholder="Your email" />
        <input id="login_empid" class="input" type="text" placeholder="Employee ID" />
        <input id="login_doj" class="input" type="date" placeholder="Date of Joining" />
        <select id="login_team" class="select"></select>
        <button id="startWeek1Btn" class="button">Start</button>
      </div>
      <div class="progress">
        <div class="progress-fill"></div>
      </div>
      <div class="progress-label"><span>Onboarding progress (current week)</span><span class="pts">0/300 pts</span></div>
      <div class="progress-label"><span>Total points (W1+W2+W3)</span><span class="pts2">0/1000 pts</span></div>
    </div>

    <div class="board" id="boardPanel">
      <div class="headerbar"></div>

      <div class="toolbar">
        <button id="btnBack" class="button outline">‚Üê Back</button>
        <button id="btnReset" class="button outline">Reset</button>
        <button id="btnLogout" class="button outline">Logout</button>
      </div>

      <!-- Team selection appears ONLY after Week 1 is completed; prefilled from login and locked -->
      <div class="teamSelect hidden" id="teamSelect">
        <div class="row">
          <select id="team" class="select"></select>
          <button id="accessTeamBtn" class="button">Access my team onboarding</button>
          <span class="badge-chip">Resources: <a class="link" target="_blank" href="https://bmwtechworksin.sharepoint.com/:f:/r/sites/SFM-AAS/Shared%20Documents/Shared_Drive/Onboarding?csf=1&web=1&e=Kt9gel">Onboarding SharePoint</a> ‚Ä¢ <a class="link" target="_blank" href="https://bmwtechworksin.sharepoint.com/:f:/r/sites/SFM-AAS/Shared%20Documents/Shared_Drive/Team_Details?csf=1&web=1&e=rl1Hae">Team Details</a></span>
        </div>
      </div>

      <div class="tabs"></div>
      <div class="subtabs"></div>
      <div class="grid"></div>

      <div class="footer">¬© BMWTechworks India ‚Ä¢ Premium dark theme ‚Ä¢ Confetti + Mascot + Certificate</div>
    </div>

    <div class="toast"></div>
  </div>

  <div id="congratsModal" class="congrats-modal hidden" role="dialog" aria-live="polite" aria-hidden="true" hidden style="display:none">
    <div class="congrats-card">
      <div class="mascot">
        <svg viewBox="0 0 200 160" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#0066B1"/>
              <stop offset="100%" stop-color="#6CB8FF"/>
            </linearGradient>
          </defs>
          <rect x="70" y="110" width="60" height="12" rx="6" fill="#1f2430" />
          <path d="M100 30 c-25 0 -30 35 -20 50 c7 10 20 15 20 15 s13 -5 20 -15 c10 -15 5 -50 -20 -50z" fill="url(#grad)" stroke="#263042" stroke-width="2"/>
          <path d="M60 55 c-8 0 -10 12 -5 18 c7 8 18 6 22 -3" fill="none" stroke="#6CB8FF" stroke-width="3"/>
          <path d="M140 55 c8 0 10 12 5 18 c-7 8 -18 6 -22 -3" fill="none" stroke="#6CB8FF" stroke-width="3"/>
          <circle cx="92" cy="60" r="5" fill="#fff" />
          <circle cx="108" cy="60" r="5" fill="#fff" />
          <circle cx="92" cy="60" r="2" fill="#001933" />
          <circle cx="108" cy="60" r="2" fill="#001933" />
          <path d="M90 72 q10 8 20 0" stroke="#001933" stroke-width="3" fill="none" />
          <circle class="spark" cx="30" cy="30" r="3" fill="#6CB8FF" />
          <circle class="spark" cx="170" cy="20" r="3" fill="#6CB8FF" />
          <circle class="spark" cx="180" cy="80" r="3" fill="#6CB8FF" />
        </svg>
      </div>
      <h2 class="congrats-title">Congratulations!</h2>
      <p class="congrats-text">You completed <span class="wk">Week</span>! Keep it up üöÄ</p>
      <div id="finalActions" class="congrats-actions hidden" aria-hidden="true">
        <button class="button" id="dlCertPngBtn">Download Certificate (PNG)</button>
        <button class="button outline" id="printCertBtn">Save as PDF</button>
        <button class="button" id="dlExcelBtn">Download Week Summary (Excel)</button>
        <button class="button outline" id="sendEmailBtn">Send Email to HR</button>
      </div>
      <div class="congrats-actions">
        <button class="button" id="continueBtn">Continue</button>
      </div>
    </div>
  </div>

  <canvas id="certificate-canvas" width="1200" height="850" class="hidden"></canvas>

  <script src="app.js"></script>
</body>
</html>