<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>BMWTechWorks Pune - Visitor Information</title>
<style>
Â  Â 
Â  Â  :root{ --accent:#007aff; --danger:#ff3b30; --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; }
Â  Â  html,body{ height:100%; }
Â  Â  body{ font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0;background-color: #f4f4f4; }

Â  Â  /* Compact bold heading */
Â  Â  header{ background-color: #003366; color: white; text-align: center;padding:12px 16px; background:#ffffff; border-bottom:1px solid #e6e6e6; }
Â  Â  header h2{ color: #003366; margin:0; font-size:16px; font-weight:700; line-height:1.3; }

Â  Â  /* Container */
Â  Â  .container{ padding:0 12px 24px; }
Â  Â  .grid{ display:grid; grid-template-columns: 2fr 1fr; gap:14px; }
Â  Â  @media (max-width:1000px){ .grid{ grid-template-columns: 1fr; } }
Â  Â  .card{ background:var(--card); border:1px solid #e6e6e6; border-radius:12px; padding:14px; margin:14px 0; }
Â  Â  .content{ margin-top:8px; }
Â  Â  .muted{ color:var(--muted); }

Â  Â  /* Zoom wrap */
Â  Â  .zoom-wrap{ position:relative; overflow:hidden; border-radius:12px; background:#fff; }
Â  Â  .zoom-inner{ display:block; width:100%; height:auto; user-select:none; pointer-events:none; }
Â  Â  .zoom-hint{ position:absolute; left:12px; bottom:12px; background:rgba(255,255,255,0.85); color:#111; padding:6px 10px; border-radius:8px; font-size:12px; }

Â  Â  /* Tools */
Â  Â  .tools{ display:flex; flex-wrap:wrap; gap:6px; margin:10px 0; }
Â  Â  .btn{ font-size:16px; font-weight:600; padding:8px 14px; border:1px solid #d0d0d0; border-radius:8px; background-color: #003366; color: white; border: none; cursor:pointer; }
Â  Â  .btn.primary{ background-color: #003366; color: white; border: none; background:var(--accent); }

Â  Â  /* Controls bar as compact card */
Â  Â  .title{ font-size:16px; font-weight:700; }
Â  Â  .controls{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-top:10px; }
Â  Â  .controls label{ font-size:14px; }
Â  Â  .controls select, .controls input[type="range"]{ height:32px; }

Â  Â  /* Canvas and overlay */
Â  Â  #canvasWrap{ position:relative; border:1px solid #e6e6e6; border-radius:12px; overflow:hidden; background:#fff; }
Â  Â  #floor{ display:block; width:100%; height:auto; margin:0; background:transparent; }
Â  Â  #overlay{ position:absolute; inset:0; width:100%; height:100%; }

Â  Â  /* Legend */
Â  Â  .legend{ margin-top:10px; }
Â  Â  .row{ display:flex; gap:8px; align-items:center; }
Â  Â  .swatch{ width:18px; height:4px; background:#ff3b30; border-radius:2px; }

Â  Â  /* Fix extra whitespace/gaps under images and banners */
Â  Â  img{ vertical-align:middle; }
Â  Â  .banner{ background:#eef4ff; border:1px solid #dbe6ff; border-radius:8px; padding:8px 10px; margin:10px 0; }
Â  Â  .audio-bar{ background:#fafafa; border:1px solid #eee; border-radius:8px; padding:8px 10px; margin:10px 0; }

Â  Â  /* Aside visuals */
Â  Â  .img-list{ display:grid; grid-template-columns: 1fr; gap:10px; }
Â  Â  .img-item img{ display:block; width:100%; height:auto; border-radius:8px; background:transparent; }
Â  Â  Â 
Â  Â  Â  /* Plan area */
Â  Â  #planWrap{ position:relative; background:#fff; border:1px solid #e6e6e6; border-radius:12px; overflow:hidden; }
Â  Â  #planLayer{ position:relative; transform-origin: 0 0; touch-action: none; }
Â  Â  #planImg{ display:block; width:100%; height:auto; user-select:none; pointer-events:none; }
Â  Â  /* Optional overlay kept for future use, no drawing now */
Â  Â  #routeSvg{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }

Â  Â  /* Prevent stray backgrounds */
Â  Â  .no-bg{ background: none !important; }

Â  Â  /* Toolbar buttons: readable */
Â  Â  .toolbar{ display:flex; flex-wrap:wrap; gap:6px; margin:8px 0; }
Â  Â  .toolbar button{ font-size:16px; font-weight:600; padding:8px 14px; border:1px solid #d0d0d0; border-radius:8px; background:#fff; cursor:pointer; }
Â  Â  .toolbar button.primary{ border-color: var(--accent); color:#fff; background:var(--accent); }

Â  Â  .card h3{ font-size:16px; font-weight:700; margin:0 0 8px 0; }
Â  Â  .card h4{ font-size:14px; font-weight:700; margin:0 0 6px 0; }

Â  Â  #routeSteps{ margin-top:8px; }
Â  Â  #routeSteps li{ margin:4px 0; }

Â  Â  /* Image strip for room photos: remove extra white space */
Â  Â  .imgStrip{ margin:8px 0 8px 0; padding:0; background:none; border:none; }
Â  Â  .imgRow{ display:flex; gap:8px; flex-wrap:wrap; align-items:flex-start; }
Â  Â  .imgWrap{ flex:1 1 320px; background:none; border:none; margin:0; padding:0; line-height:0; }
Â  Â  .imgWrap img{ display:block; width:100%; height:auto; margin:0; border-radius:8px; background:transparent; }
Â  Â  img{ vertical-align:middle; }
Â  Â  .tight p{ margin:4px 0; }

Â  Â  /* Tables */
Â  Â  table{ width:100%; border-collapse:collapse; }
Â  Â  th, td{ border:1px solid #ddd; padding:8px; text-align:left; }
Â  Â  th{ background-color: #003366; color: white; }

Â  Â  a{ color:#0a84ff; text-decoration:none; }
Â  Â  a:hover{ text-decoration:underline; }
Â  Â Â 
Â  Â  footer{ margin-top:10px; color:#444; }
Â  </style>

<script>
Â  Â  function toggleLanguage(lang) {
Â  Â  Â  Â  document.querySelector('.english').style.display = lang === 'en' ? 'block' : 'none';
Â  Â  Â  Â  document.querySelector('.german').style.display = lang === 'de' ? 'block' : 'none';
Â  Â  }
</script>
</head>
   
<body>
<header>BMWTechWorks Pune - Visitor Information</header>
<div class='container'>
    <div style='text-align:center;'>
        <button class='toggle-btn' onclick="toggleLanguage('en')">English</button>
        <button class='toggle-btn' onclick="toggleLanguage('de')">Deutsch</button>
    </div>

Â       Â  <div class='english'>
Â  Â  Â  Â 
        <div class='english'>
        <h2>Quick Links</h2>
        <div class='links'>
            <a href='https://www.olacabs.com/' target='_blank'>Ola</a>
            <a href='https://www.uber.com/in/en/' target='_blank'>Uber</a>
            <a href='https://www.zomato.com/' target='_blank'>Zomato</a>
            <a href='https://www.swiggy.com/' target='_blank'>Swiggy</a>
            <a href='https://www.xe.com/currencyconverter/' target='_blank'>INR to EUR Converter</a>
            <a href='https://www.tripadvisor.in/Attractions-g297654-Activities-Pune_Maharashtra.html' target='_blank'>Local Sightseeing</a>
        </div>




        <h2>Company Info</h2>
        <p>BMWTechWorks India official site: <a href='https://www.bmwgroup.com/en.html' target='_blank'>Visit Website</a></p> 
        <p>LinkedIn: <a href='https://www.linkedin.com/company/bmwgroup/' target='_blank'>BMWTechWorks India LinkedIn</a></p>

        <h2>Emergency Contacts</h2>
        <p>Reception: +91-XXXXXXXXXX</p>
        <p>Ambulance: 108</p>
        <p>Emergency Facility Contact: +91-9769317569</p>
         <p><strong>Emergency FirstAid & Restroom:</strong> Floor No. 6 | <strong> Parking:</strong> Floor No. 3 | <strong>General Canteen:</strong> Terrace</p>

        <h2>Company Layout & Location</h2>
        <p>Address: BMWTechWorks India, 14 Offices, 1st Floor, Amar Tech Park, Balewadi, Pune, Maharashtra 411045</p>
        <a href='https://maps.app.goo.gl/BYkbvW1AjfjMWCiy6?g_st=ipc' target='_blank'>View on Google Maps</a> 

        Â Â   <h2>Nearby Emergency</h2>
Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  Â  <tr><th>Category</th><th>Name & Details</th><th>Google Map Link</th></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hospital</td><td>Jupiter Hospital, Baner 1.5 km â€“ Multispeciality, 24x7 Emergency</td><td><a href='https://maps.app.goo.gl/cMBfuzuQExXohu8VA?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hospital</td><td>Accord Hospital, Baner 2 km â€“ Multispeciality</td><td><a href='https://maps.app.goo.gl/Nes49fGqayziF9BN9?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hospital</td><td>Ashwini Hospital, Balewadi 1.2 km â€“ General Clinic & OPD</td><td><a href='https://maps.app.goo.gl/SN7As6kyDPkvMz366?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Ambulance</td><td>Jupiter Hospital Ambulance 24x7 Ambulance â€“ 020 2799 2799</td><td><a href='https://maps.app.goo.gl/6h8X9kYvZr2JupiterHospital' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Ambulance</td><td>Mai Ambulance Services Local Ambulance â€“ Fast service</td><td><a href='https://maps.app.goo.gl/MaiAmbulanceLink' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Ambulance</td><td>Nucare Ambulance Contact â€“ 90966 67656</td><td><a href='https://maps.app.goo.gl/NucareAmbulanceLink' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hotel</td><td>Holiday Inn Express Hinjewadi 3-star hotel near Balewadi</td><td><a href='https://maps.app.goo.gl/aPHsvdNCU1czoet37?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hotel</td><td>The Orchid Hotel 4-star hotel, Balewadi Stadium</td><td><a href='https://maps.app.goo.gl/3GcSzVeJBFFRULc26?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Hotel</td><td>Sadanand Regency Budget hotel near Balewadi</td><td><a href='https://maps.app.goo.gl/EePcq8Ej3w6jnXyN9?g_st=ipc' target='_blank'>View</a></td></tr>
Â  Â  Â  Â  </table>

        <h2>Basic German to English Phrases</h2>
        <table>
            <tr><th>German</th><th>English</th></tr>
            <tr><td>Hallo</td><td>Hello / Namaste</td></tr>
            <tr><td>Ich mÃ¶chte zu diesem Ort gehen</td><td>I want to go to this place</td></tr>
            <tr><td>Wie viel kostet das?</td><td>How much money?</td></tr>
            <tr><td>Danke</td><td>Thanks</td></tr>
            <tr><td>Ich mÃ¶chte das</td><td>I want this</td></tr>
            <tr><td>Guten Morgen</td><td>Good Morning</td></tr>
            <tr><td>Gute Nacht</td><td>Good Night</td></tr>
            <tr><td>Wo ist die Toilette?</td><td>Where is the restroom?</td></tr>
            <tr><td>KÃ¶nnen Sie mir helfen?</td><td>Can you help me?</td></tr>
            <tr><td>Ich brauche Wasser</td><td>I need water</td></tr>
        </table>
    </div>
</div>
</body>
</html>

<!-- New Sections Added -->
<hr>
<h2 id='vms'>Visitor Management System (VMS)</h2>
<p>Employees can enter ATP by showing their Company ID Card at the entrance.<br>
To enter Amar Tech Park (ATP), any visitor needs a VMS Pass (Visitor Management System Pass).<br>
<b>Who is a visitor?</b> Any person who is not a BTI employee.<br>
Create a VMS pass for expected visitor by clicking on <a href='#'>Prescheduler</a>.<br>
User ID: Facilities@bmwtechworks.in (For password, please connect with facilities).</p>

<h2 id='visitor-protocol'>Visitor Entry Protocol</h2>
<ul>
<li>All visitors must report to the reception desk on the 1st floor upon arrival.</li>
<li>Enter name, time of arrival, and purpose of visit in the visitor log.</li>
<li>Meetings should be conducted in designated areas: Visitor Room or Training Room.</li>
<li>For long meetings: Host must pre-book the meeting room and escort the visitor.</li>
<li>Visitors are not permitted to move around unaccompanied. Strict action will be taken against the host if violated.</li>
</ul>

<h2 id='parking'>Parking Guidelines</h2>
<ul>
<li>Parking is strictly first-come, first-served.</li>
<li>60 slots allocated for employees at P3 and P1 levels.</li>
<li>No common parking for external visitors/vendors. They must arrange parking outside ATP premises.</li>
</ul>

<h2 id='employee-entry'>Employee Entry & Exit</h2>
<ul>
<li>Employees can use both sides of the lift for entry and exit.</li>
<li>Always wear and display your ID card.</li>
<li>Swipe your access card while entering and exiting.</li>
<li>Tailgating is strictly prohibited and considered a security violation.</li>
</ul>

 
<!-- ===== BTI Pune â€“ Visitor Information: Exit Plan + Guidance ===== -->
<header>
  <h2>Exit Plan (Zoom â€¢ Pan â€¢ Fullscreen)</h2>
</header>

<div class="container">
  <div class="grid">
    <section class="card">
      <h2>Exit Plan (Zoom â€¢ Pan â€¢ Fullscreen)</h2>
         <div class="content">
        <!-- Map: zoom/pan wrapper -->
        <div class="zoom-wrap" id="zoomWrap" style="position:relative; overflow:hidden; border:1px solid #d8def0; border-radius:6px;">
          <!-- Optional overlay holder (SVG will be injected here if you add routes later) -->
          <!-- <svg id="routeOverlay" style="position:absolute; inset:0; pointer-events:none;"></svg> -->
          <img id="zoomImg" class="zoom-inner" src="r1.png" alt="BTI Pune Exit Plan"
               style="display:block; width:100%; transform-origin:0 0; user-select:nonepx;">
        </div>

        <p class="muted" style="margin-top:8px">Best experienced on Chrome/Edge. Use headphones in open areas.</p>
        <header style="margin-top:10px;">
          <div class="title" style="font-weight:600;">BTI Pune â€¢ Exit Guidance</div>
          <div class="controls" style="display:flex; flex-wrap:wrap; gap:8px; align-items:center;">
            <label for="exitSelect">Exit:</label>
            <select id="exitSelect">
              <option value="None" selected>None</option>
              <option value="EXIT1">EXIT1</option>
              <option value="EXIT2">EXIT2</option>
              <option value="EXIT3">EXIT3</option>
              <option value="EXIT4">EXIT4</option>
              <option value="EXIT5">EXIT5</option>
            </select>

            <label for="langSelect">Lang:</label>
            <select id="langSelect">
              <option value="en">EN</option>
              <option value="de">DE</option>
            </select>

            <button class="btn" id="play">ğŸ”Š Play Audio Guidance</button>
            <button class="btn" id="replay">Replay</button>
            <button class="btn" id="mute">Mute</button>

            <!-- Optional: second set of zoom buttons (header block) -->
            <button class="btn" id="zoomOut">â– Zoom Out</button>
            <button class="btn" id="zoomIn">â• Zoom In</button>
            <button class="btn" id="resetView">Reset</button>
          </div>
        </header>

        <!-- Guidance text display -->
        <div id="routeText" class="routeText" aria-live="polite"
             style="margin:8px 0; padding:8px; background:#f6f7fb; border:1px solid #d8def0; border-radius:6px;">
          Select an exit to see guidance.
        </div>

        <!-- Hidden audio element driven by the controls -->
        <audio id="routeAudio" preload="auto" style="display:none;"></audio>

        <!-- Optional: Graceful message if JS is disabled -->
        <noscript>
          <div style="padding:12px;color:#e11d48;">
            JavaScript is required for interactive routes and audio guidance.
          </div>
        </noscript>
      </div>
    </section>

   Â <aside class="card">
Â  Â  Â  Â  <h2>Quick References & QR</h2>
Â  Â  Â  Â  <div class="content">
Â  Â  Â  Â  Â  <div class="img-list">
Â  Â  Â  Â  Â  Â  <div class="img-item">
Â  Â  Â  Â  Â  Â  Â  <img src="r5.png" alt="Lanyard Types" />
Â  Â  Â  Â  Â  Â  Â  <p class="muted">ID lanyards: Employee â€¢ Contractor â€¢ Visitor â€¢ BMW Employee</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="img-item">
Â  Â  Â  Â  Â  Â  Â  <img src="r3.png" alt="Access Zones" />
Â  Â  Â  Â  Â  Â  Â  <p class="muted">Access policy map: Aâ€“G zones with restrictions and photography notes.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <hr style="margin:16px 0; border-color:#1f3f74"/>
Â  Â  Â  Â  </div>
Â  Â  Â  </aside>
  </div>
</div>

<!-- ===== Logic: Zoom/Pan + Audio/TTS + Reset ===== -->


<script>
document.addEventListener('DOMContentLoaded', () => {
  /* =========================================
     BTI Pune â€¢ Exit Guidance (TTS only)
     - Force default EXIT1 via JS
     - Text visible immediately on load/change
     - Play/Replay enabled for EXIT1..EXIT5
     - Reset sets Exit=None + default message
     ========================================= */

  /* -------- Guidance (EN/DE) -------- */
  const GUIDANCE = {
    en: {
      EXIT1: "From your current location, move west along the main corridor; at the junction turn north to reach the West Exit (near Success â€“ Board room).",
      EXIT2: "Head west and then south along the corridor to the Southâ€‘West Exit (near Joy).",
      EXIT3: "Proceed towards the central corridor and continue north to the Central Exit (near Debug).",
      EXIT4: "Go east along the main corridor; at the next junction turn north to reach the East Exit (near iDrive/Mâ€‘Mode).",
      EXIT5: "Continue east to the far right wing and turn south to reach the Farâ€‘East Exit (near Xdrive/Torque)."
    },
    de: {
      EXIT1: "Gehen Sie nach Westen entlang des Hauptflurs; biegen Sie an der Kreuzung nach Norden ab zum Westausgang (bei Success â€“ Board room).",
      EXIT2: "Gehen Sie nach Westen und dann nach SÃ¼den entlang des Flurs zum SÃ¼dwestausgang (bei Joy).",
      EXIT3: "Gehen Sie zum zentralen Flur und weiter nach Norden zum Zentralausgang (bei Debug).",
      EXIT4: "Gehen Sie nach Osten entlang des Hauptflurs; biegen Sie an der nÃ¤chsten Kreuzung nach Norden ab zum Ostausgang (bei iDrive/Mâ€‘Mode).",
      EXIT5: "Gehen Sie weiter nach Osten bis zum rechten FlÃ¼gel und biegen Sie nach SÃ¼den ab zum ganz rechten Ostausgang (bei Xdrive/Torque)."
    }
  };

  /* -------- DOM refs -------- */
  const zoomWrap      = document.getElementById('zoomWrap');
  const zoomImg       = document.getElementById('zoomImg');

  const btnSpeak      = document.getElementById('btnSpeak');
  const btnStop       = document.getElementById('btnStop');
  const btnReset      = document.getElementById('btnReset');
  const btnZoomIn     = document.getElementById('btnZoomIn');
  const btnZoomOut    = document.getElementById('btnZoomOut');
  const btnFullscreen = document.getElementById('btnFullscreen');

  const exitSelect    = document.getElementById('exitSelect');
  const langSelect    = document.getElementById('langSelect');

  const playHeader    = document.getElementById('play');
  const replayHeader  = document.getElementById('replay');
  const muteHeader    = document.getElementById('mute');

  const zoomOutHeader = document.getElementById('zoomOut');
  const zoomInHeader  = document.getElementById('zoomIn');
  const resetHeader   = document.getElementById('resetView');

  const routeText     = document.getElementById('routeText');
  const routeAudio    = document.getElementById('routeAudio'); // unused in TTS mode

  /* -------- Normalizers -------- */
  function normalizeExit(v){ return String(v || '').trim().toUpperCase(); }
  function normalizeLang(v){ v = String(v || '').trim().toLowerCase(); return v === 'de' ? 'de' : 'en'; }

  /* -------- Helpers -------- */
  function isValidExit(val){ val = normalizeExit(val); return ['EXIT1','EXIT2','EXIT3','EXIT4','EXIT5'].includes(val); }
  function isNone(val){ return normalizeExit(val) === 'NONE'; }
  function defaultMessage(lang){ return lang==='de' ? 'WÃ¤hlen Sie einen Ausgang aus, um die Anleitung zu sehen.' : 'Select an exit to see guidance.'; }
  function setButtonsEnabled(enabled){
    if (btnSpeak)     btnSpeak.disabled     = !enabled;
    if (playHeader)   playHeader.disabled   = !enabled;
    if (replayHeader) replayHeader.disabled = !enabled;
    if (btnStop)      btnStop.disabled      = false;
    if (btnReset)     btnReset.disabled     = false;
    if (muteHeader)   muteHeader.disabled   = false;
  }

  /* -------- Force default EXIT1 (no HTML edits needed) -------- */
  if (exitSelect) {
    exitSelect.value = 'EXIT1'; // set default
    // If your markup has "None" first, it will be overridden by this.
  }

  /* -------- State (after forcing EXIT1) -------- */
  let currentExit = normalizeExit(exitSelect?.value || 'EXIT1');
  let currentLang = normalizeLang(langSelect?.value || 'en');
  let isMuted = false;
  let voices = [];
  let activeUtterance = null;

  /* -------- Guidance text render -------- */
  function guidanceText(){
    if (!isValidExit(currentExit)) return defaultMessage(currentLang);
    const phrases = GUIDANCE[currentLang] || GUIDANCE.en;
    return phrases[currentExit] || defaultMessage(currentLang);
  }
  function updateGuidanceUI(){
    const header = isValidExit(currentExit) ? `${currentExit} â€¢ ${currentLang.toUpperCase()}` : `${currentLang.toUpperCase()}`;
    routeText.textContent = `${header} â€¢ ${guidanceText()}`;
    setButtonsEnabled(isValidExit(currentExit));
  }

  /* -------- Speech synthesis -------- */
  function loadVoices(){ try { voices = window.speechSynthesis.getVoices() || []; } catch { voices = []; } }
  loadVoices();
  if (typeof window.speechSynthesis !== 'undefined'){ window.speechSynthesis.onvoiceschanged = loadVoices; }
  function pickVoice(lang){
    const prefer = lang==='de' ? ['de-DE','de-AT','de'] : ['en-US','en-GB','en'];
    for (const code of prefer){ const v = voices.find(voice => (voice.lang||'').toLowerCase() === code.toLowerCase()); if (v) return v; }
    const v2 = voices.find(voice => (voice.lang||'').toLowerCase().startsWith(lang==='de' ? 'de' : 'en'));
    return v2 || voices[0] || null;
  }
  function speakGuidance(){
    if (!isValidExit(currentExit)){
      updateGuidanceUI();
      return;
    }
    if (typeof window.speechSynthesis === 'undefined'){
      routeText.textContent = 'Speech not supported on this browser. Please use Chrome/Edge.';
      return;
    }
    try { window.speechSynthesis.cancel(); } catch {}
    activeUtterance = new SpeechSynthesisUtterance(guidanceText());
    activeUtterance.lang = (currentLang==='de') ? 'de-DE' : 'en-US';
    const voice = pickVoice(currentLang);
    if (voice) activeUtterance.voice = voice;
    activeUtterance.rate = 1.0; activeUtterance.pitch = 1.0; activeUtterance.volume = isMuted ? 0 : 1;

    activeUtterance.onstart = () => { if (btnSpeak) btnSpeak.textContent = 'ğŸ”Š Playing'; if (playHeader) playHeader.textContent = 'Playing'; };
    activeUtterance.onend   = () => { if (btnSpeak) btnSpeak.textContent = 'ğŸ”Š Play Audio Guidance'; if (playHeader) playHeader.textContent = 'Play'; };
    activeUtterance.onerror = (e) => { console.error('Speech synthesis error:', e); routeText.textContent = 'Unable to play synthesized audio. Try again.'; setButtonsEnabled(true); };

    window.speechSynthesis.speak(activeUtterance);
  }
  function stopSpeech(){
    try { window.speechSynthesis.cancel(); } catch {}
    activeUtterance = null;
    if (btnSpeak) btnSpeak.textContent = 'ğŸ”Š Play Audio Guidance';
    if (playHeader) playHeader.textContent = 'Play';
  }
  function replaySpeech(){ stopSpeech(); speakGuidance(); }
  function toggleMute(){
    isMuted = !isMuted;
    if (muteHeader) muteHeader.textContent = isMuted ? 'Unmute' : 'Mute';
    if (activeUtterance) replaySpeech(); // apply new volume
  }

  /* -------- Init (render text immediately) -------- */
  function init(){
    if (routeAudio) routeAudio.style.display = 'none'; // unused in TTS mode
    updateGuidanceUI(); // TEXT VISIBLE ON LOAD for EXIT1
  }
  init();

  /* -------- Dropdown handlers (text updates instantly) -------- */
  exitSelect?.addEventListener('change', () => {
    currentExit = normalizeExit(exitSelect.value);
    updateGuidanceUI(); // TEXT VISIBLE IMMEDIATELY ON EXIT CHANGE
  });
  langSelect?.addEventListener('change', () => {
    currentLang = normalizeLang(langSelect.value);
    updateGuidanceUI(); // TEXT VISIBLE IMMEDIATELY ON LANG CHANGE
    loadVoices();
  });

  /* -------- Buttons (both blocks) -------- */
  btnSpeak?.addEventListener('click', speakGuidance);
  btnStop?.addEventListener('click', stopSpeech);
  btnReset?.addEventListener('click', resetAll);
  btnZoomIn?.addEventListener('click', () => zoomBy(0.25));
  btnZoomOut?.addEventListener('click', () => zoomBy(-0.25));
  btnFullscreen?.addEventListener('click', toggleFullscreen);

  playHeader?.addEventListener('click', speakGuidance);
  replayHeader?.addEventListener('click', replaySpeech);
  muteHeader?.addEventListener('click', toggleMute);
  zoomInHeader?.addEventListener('click', () => zoomBy(0.25));
  zoomOutHeader?.addEventListener('click', () => zoomBy(-0.25));
  resetHeader?.addEventListener('click', resetAll);

  /* -------- Reset (speech + view + state + text) -------- */
  function resetAll(){
    stopSpeech();   // stop TTS
    resetView();    // reset pan/zoom
    if (exitSelect) exitSelect.value = 'None'; // programmatically set None
    currentExit = 'None';
    updateGuidanceUI(); // show default message + disable Play/Replay
  }

  /* -------- Map: zoom / pan / fullscreen -------- */
  let scale = 1, tx = 0, ty = 0;
  function applyTransform(){ if (!zoomImg) return; const t = `translate(${tx}px, ${ty}px) scale(${scale})`; zoomImg.style.transformOrigin = '0 0'; zoomImg.style.transform = t; }
  function zoomBy(delta){ scale = Math.max(0.5, Math.min(4, scale + delta)); applyTransform(); }
  function resetView(){ scale = 1; tx = 0; ty = 0; applyTransform(); }
  function toggleFullscreen(){ if (!document.fullscreenElement){ zoomWrap?.requestFullscreen?.().catch(()=>{}); } else { document.exitFullscreen?.(); } }

  // Panning
  let dragging = false, sx = 0, sy = 0;
  zoomWrap?.addEventListener('pointerdown', (e) => { dragging = true; zoomWrap.setPointerCapture(e.pointerId); sx = e.clientX - tx; sy = e.clientY - ty; });
  zoomWrap?.addEventListener('pointermove', (e) => { if (!dragging) return; tx = e.clientX - sx; ty = e.clientY - sy; applyTransform(); });
  zoomWrap?.addEventListener('pointerup',   (e) => { dragging = false; zoomWrap.releasePointerCapture(e.pointerId); });

  // Keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    if (e.key === '+') zoomBy(0.25);
    if (e.key === '-') zoomBy(-0.25);
    if (e.key.toLowerCase() === 'r') resetAll();
    if (e.key.toLowerCase() === 'f') toggleFullscreen();
  });
});
</script>




 <header>
    <h2>BMWTechWorks Pune â€“ Meeting Rooms</h2>
  </header>

  <main class="grid">
    <section id="planWrap" class="card">
      <div id="planLayer">
        <img id="planImg" src="r2.png" alt="BTI Pune floor plan"/>
        <!-- Optional SVG overlay kept for future use; not drawing any route now -->
        <svg id="routeSvg" viewBox="0 0 100 100" preserveAspectRatio="none"></svg>
      </div>
      <p class="muted">Key rooms: Success, Inspire, Joy, Debug, iDrive, Mâ€‘Mode, Drift, xDrive, Torque.</p>
      <p class="muted" style="margin:8px 0 0 0">Drag to pan; use +/âˆ’ to zoom.</p>
    </section>

    <section class="card">
      <div class="card">
        <h3>Room Route Finder</h3>
        <label for="roomSel">Choose Meeting room:</label>
        <div class="toolbar">
          <button id="zoomIn" title="Zoom in">ï¼‹</button>
          <button id="zoomOut" title="Zoom out">ï¼</button>
          <button id="reset" title="Reset view">Reset</button>
          <button id="clearRoute" class="primary" title="Clear text & audio">Clear</button>
          <button id="langToggle" title="Toggle language">EN / DE</button>
        </div>
        <select id="roomSel">
          <option value="">â€” Select â€”</option>
          <option>Success</option>
          <option>Inspire</option>
          <option>Joy</option>
          <option>Debug</option>
          <option>iDrive</option>
          <option>M-Mode</option>
          <option>Drift</option>
          <option>xDrive</option>
          <option>Torque</option>
        </select>
        <ol id="routeSteps" class="muted" style="margin-top:8px"></ol>
      </div>

      <div id="audioPanel" class="card">
        <h4>Audio Guidance (TTS)</h4>
        <div class="toolbar">
          <button id="playAudio">Play</button>
          <button id="stopAudio">Stop</button>
          <span id="audioStatus" class="muted"></span>
        </div>
        <p class="muted" style="margin-top:6px">Tap <strong>Play</strong> after selecting a room.</p>
      </div>
    </section>
  </main>

  <script>
    // Data
    const routePaths = {
      Success:[[0.120,0.550],[0.100,0.480],[0.080,0.360],[0.060,0.300]],
      Inspire:[[0.120,0.550],[0.100,0.480],[0.085,0.400]],
      Joy:[[0.120,0.550],[0.140,0.560]],
      Debug:[[0.120,0.550],[0.300,0.550],[0.410,0.520]],
      iDrive:[[0.120,0.550],[0.300,0.550],[0.530,0.540]],
      'M-Mode':[[0.120,0.550],[0.300,0.550],[0.640,0.560]],
      Drift:[[0.120,0.550],[0.300,0.550],[0.740,0.560],[0.800,0.560]],
      xDrive:[[0.120,0.550],[0.300,0.550],[0.820,0.550],[0.880,0.540]],
      Torque:[[0.120,0.550],[0.300,0.550],[0.860,0.540],[0.940,0.540]]
    };

    const routeText = {
      en: {
        Success: ['Reception â†’ left corridor', 'Proceed up to board room', 'Success (Board)'],
        Inspire: ['Reception â†’ left corridor', 'Training room next to Success'],
        Joy: ['Reception â†’ left corridor', 'Joy is near Visitor area'],
        Debug: ['Reception â†’ main corridor', 'Continue to middle section', 'Debug lab is at center'],
        iDrive: ['Reception â†’ main corridor', 'Pass Debug', 'iDrive opposite Debug'],
        'M-Mode': ['Reception â†’ main corridor', 'Turn right', 'Mâ€‘Mode corner room'],
        Drift: ['Reception â†’ main corridor', 'Turn right into side corridor â†’ Tâ€‘junction', 'Drift next to xDrive'],
        xDrive: ['Reception â†’ main corridor', 'Turn right into side corridor', 'xDrive near Torque'],
        Torque: ['Reception â†’ far right end', 'Opposite xDrive', 'Torque room']
      },
      de: {
        Success:['Empfang â†’ linker Flur','Bis zum Boardroom','Success (Board)'],
        Inspire:['Empfang â†’ linker Flur','Schulungsraum neben Success'],
        Joy:['Empfang â†’ linker Flur','Joy nahe Besucherbereich'],
        Debug:['Empfang â†’ Hauptflur','Weiter zum Mittelteil','Debugâ€‘Labor im Zentrum'],
        iDrive:['Empfang â†’ Hauptflur','An Debug vorbei','iDrive gegenÃ¼ber Debug'],
        'M-Mode':['Empfang â†’ Hauptflur','Nach rechts abbiegen','Mâ€‘Mode Eckraum'],
        Drift:['Empfang â†’ Hauptflur','Rechts in Seitenflur â†’ Tâ€‘Kreuzung','Drift neben xDrive'],
        xDrive:['Empfang â†’ Hauptflur','Rechts in Seitenflur','xDrive nahe Torque'],
        Torque:['Empfang â†’ ganz rechts','GegenÃ¼ber xDrive','Torqueâ€‘Raum']
      }
    };

    // Pan/zoom
    const layer = document.getElementById('planLayer');
    const svg = document.getElementById('routeSvg'); // present but unused for drawing
    let scale = 1, tx = 0, ty = 0; let dragging = false, px = 0, py = 0;
    function apply(){ layer.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`; }
    apply();
    document.getElementById('zoomIn').onclick = ()=>{ scale = Math.min(4, scale + 0.15); apply(); };
    document.getElementById('zoomOut').onclick = ()=>{ scale = Math.max(0.5, scale - 0.15); apply(); };

    // Reset: clear text + audio and reset view (+ empty dropdown)
    const sel = document.getElementById('roomSel');
    const steps = document.getElementById('routeSteps');

    document.getElementById('reset').onclick = ()=>{
      scale = 1; tx = 0; ty = 0; apply();
      clearSvg(); steps.innerHTML=''; stopTTS(); sel.value='';
    };

    layer.addEventListener('pointerdown', (e)=>{ dragging = true; px = e.clientX; py = e.clientY; layer.setPointerCapture(e.pointerId); });
    layer.addEventListener('pointermove', (e)=>{ if(!dragging) return; const dx = e.clientX - px; const dy = e.clientY - py; tx += dx; ty += dy; px = e.clientX; py = e.clientY; apply(); });
    layer.addEventListener('pointerup', ()=> dragging=false);

    // No route drawing
    function clearSvg(){ if(svg) svg.innerHTML=''; }
    function drawRoute(room){ clearSvg(); return; }

    // Selection + language (text + TTS only)
    let currentLang = (new URLSearchParams(location.search)).get('lang') || 'en';

    function selectRoom(room){
      if(!room){ steps.innerHTML=''; clearSvg(); stopTTS(); return; }
      sel.value = room;
      steps.innerHTML='';
      (routeText[currentLang][room]||[]).forEach(s=>{ const li=document.createElement('li'); li.textContent=s; steps.appendChild(li); });
      // drawRoute(room); // intentionally not drawing any route
      updateVoiceStatus();
    }

    sel.addEventListener('change', ()=> selectRoom(sel.value));
    document.getElementById('langToggle').onclick = ()=>{ currentLang = (currentLang==='en')?'de':'en'; selectRoom(sel.value); };

    // Audio via Web Speech API (TTS)
    const audioStatus = document.getElementById('audioStatus');
    let voices = []; function loadVoices(){ voices = window.speechSynthesis.getVoices(); }
    loadVoices(); window.speechSynthesis.onvoiceschanged = loadVoices;

    function pickVoice(langCode){
      const exact = voices.find(v=>v.lang.toLowerCase()===langCode.toLowerCase());
      if(exact) return exact;
      const prefix = langCode.split('-')[0];
      const starts = voices.find(v=>v.lang.toLowerCase().startsWith(prefix.toLowerCase()));
      if(starts) return starts;
      return voices[0] || null;
    }

    function buildSpeechText(room, lang){ const lines = routeText[lang][room] || []; return lines.join('. '); }

    let currentUtterance = null;
    function stopTTS(){ if(currentUtterance){ window.speechSynthesis.cancel(); currentUtterance = null; } else { window.speechSynthesis.cancel(); } audioStatus.textContent = ''; }

    function speakSteps(room, lang){
      stopTTS();
      if(!room){ audioStatus.textContent='Select a room first.'; return; }
      const text = buildSpeechText(room, lang);
      if(!text){ audioStatus.textContent = 'No audio text available.'; return; }
      const voice = pickVoice(lang==='de' ? 'de-DE' : 'en-US');
      const utter = new SpeechSynthesisUtterance(text);
      if(voice) utter.voice = voice;
      utter.rate = 1.0; utter.pitch = 1.0;
      utter.onstart = ()=>{ audioStatus.textContent = `Speaking (${(voice && voice.lang) || (lang==='de'?'de-DE':'en-US')})â€¦`; };
      utter.onend   = ()=>{ audioStatus.textContent = 'Done.'; setTimeout(()=> audioStatus.textContent='', 800); };
      utter.onerror = ()=>{ audioStatus.textContent = 'Speech error. Try again.'; };
      currentUtterance = utter;
      window.speechSynthesis.speak(utter);
    }

    document.getElementById('playAudio').onclick = ()=> speakSteps(sel.value, currentLang);
    document.getElementById('stopAudio').onclick = ()=> stopTTS();

    // Clear: text + audio (keeps zoom/pan)
    document.getElementById('clearRoute').onclick = ()=>{ clearSvg(); steps.innerHTML=''; stopTTS(); sel.value=''; };

    // Deep link (shows text + TTS only)
    const qs = new URLSearchParams(location.search);
    const initialRoom = qs.get('room');
    if(initialRoom && routeText.en[initialRoom]){ sel.value = initialRoom; selectRoom(initialRoom); }
  </script>
<h2 id='safety'>Safety & Emergency</h2>
<p>Emergency escape route layout is pasted in designated areas.<br>
<b>Emergency Response Team (ERT) Members:</b></p>
<ul>
<li>DPE: Yogesh Tambat, Zulqurnain Khan</li>
<li>Digital Company: Rishabh Kundal</li>
<li>Software Factory: Sandesh Gharal</li>
<li>Driving ECU: Vivek Patil, Ganesh Garg</li>
<li>SSP: Aniket Patil, Chahul Turkar</li>
<li>AIML & Infotainment: Pravinkumar Kale</li>
<li>Connected Vehicle: Rajiv Rengasamy</li>
</ul>

<h2 id='facility'>Facility Concerns & Reporting</h2>
<p>Email: Facilities@bmwtechworks.in for facility-related concerns and unsafe acts/conditions.</p>

<h2 id='social-media'>Social Media & Contact</h2>
<p>
<a href='https://www.linkedin.com'>LinkedIn</a> |
<a href='https://www.facebook.com'>Facebook</a> |
<a href='https://www.youtube.com'>YouTube</a><br>
Website: <a href='https://bmwtechworks.in'>bmwtechworks.in</a>
</p>

  
<footer style="text-align:center; padding:12px; color:var(--muted)">
  <div>Â© BTI Pune â€” Visitor Info.</div>
  <div>***Developed By BTI-Digital CAR - SPP Team***</div>
   <div style="font-weight:bold; color:green;">
  @Copyright BTI-Digital CAR PUNE-SPP Team - 2025</div>
</footer>
